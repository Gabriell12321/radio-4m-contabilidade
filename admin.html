<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - R√°dio Alo Voce</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Sistema de Autentica√ß√£o -->
    <script>
        // Verificar autentica√ß√£o antes de carregar a p√°gina
        function checkAuthentication() {
            const session = localStorage.getItem('adminSession');
            
            if (!session) {
                redirectToLogin('Sess√£o n√£o encontrada');
                return false;
            }
            
            try {
                const sessionData = JSON.parse(session);
                const now = new Date().getTime();
                
                // Verificar se a sess√£o expirou (24 horas)
                if (now - sessionData.loginTime > 24 * 60 * 60 * 1000) {
                    localStorage.removeItem('adminSession');
                    redirectToLogin('Sess√£o expirada');
                    return false;
                }
                
                if (!sessionData.isAuthenticated) {
                    redirectToLogin('N√£o autenticado');
                    return false;
                }
                
                // Atualizar informa√ß√µes do usu√°rio na interface
                updateUserInfo(sessionData);
                return true;
                
            } catch (error) {
                localStorage.removeItem('adminSession');
                redirectToLogin('Sess√£o inv√°lida');
                return false;
            }
        }
        
        function redirectToLogin(reason) {
            console.log('üîê Redirecionando para login:', reason);
            window.location.href = 'login.html';
        }
        
        function updateUserInfo(sessionData) {
            // Atualizar nome do usu√°rio no header
            setTimeout(() => {
                const userNameEl = document.querySelector('.user-name');
                if (userNameEl) {
                    userNameEl.textContent = sessionData.username;
                }
            }, 100);
        }
        
        // Verificar autentica√ß√£o imediatamente
        if (!checkAuthentication()) {
            // Bloquear carregamento da p√°gina
            document.documentElement.style.display = 'none';
        }
        
        // Verificar periodicamente se a sess√£o ainda √© v√°lida
        let sessionCheckInterval = setInterval(() => {
            if (!checkAuthentication()) {
                // Sess√£o inv√°lida, redirecionar
                clearInterval(sessionCheckInterval);
                window.location.href = 'login.html';
            }
        }, 60000); // Verificar a cada minuto
    </script>
    
    <style>
        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --primary-light: #34d399;
            --secondary: #1e293b;
            --accent: #8b5cf6;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f1f5f9;
            --border: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gradient-accent: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            --gradient-danger: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            --transition-base: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --primary: #10b981;
            --primary-dark: #059669;
            --primary-light: #34d399;
            --secondary: #e2e8f0;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --border: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            overflow-y: auto;
            transition: var(--transition-base);
            height: 100vh;
            position: relative;
        }

        /* Scrollbar personalizada */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* Header Superior */
        .header {
            background: var(--bg-secondary);
            padding: 1rem 2rem;
            box-shadow: var(--shadow-sm);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border-bottom: 1px solid var(--border);
        }

        [data-theme="dark"] .header {
            background: rgba(30, 41, 59, 0.9);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1920px;
            margin: 0 auto;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: var(--transition-base);
            display: none;
        }

        .menu-toggle:hover {
            background: var(--bg-tertiary);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-img {
            height: 40px;
            width: auto;
            transition: var(--transition-base);
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo:hover .logo-img {
            transform: scale(1.05);
        }

        /* Barra de pesquisa */
        .search-bar {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: var(--transition-base);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Header direito */
        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .notification-btn,
        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 10px;
            transition: var(--transition-base);
            position: relative;
        }

        .notification-btn:hover,
        .theme-toggle:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .notification-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--danger);
            color: white;
            font-size: 0.7rem;
            padding: 0.1rem 0.3rem;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        /* User menu */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition-base);
            position: relative;
        }

        .user-menu:hover {
            background: var(--primary);
            color: white;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--gradient-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .user-menu:hover .user-role {
            color: rgba(255, 255, 255, 0.8);
        }

        /* User dropdown menu */
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            min-width: 220px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .user-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-dropdown-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            text-align: center;
        }

        .user-dropdown-avatar {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.2rem;
            margin: 0 auto 0.5rem;
        }

        .user-dropdown-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .user-dropdown-role {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .user-dropdown-menu {
            padding: 0.5rem;
        }

        .user-dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition-base);
            color: var(--text-secondary);
            text-decoration: none;
        }

        .user-dropdown-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .user-dropdown-item.danger:hover {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .user-dropdown-item i {
            width: 16px;
            text-align: center;
        }

        .user-dropdown-divider {
            height: 1px;
            background: var(--border);
            margin: 0.5rem 0;
        }

        /* Layout principal */
        .main-layout {
            display: flex;
            margin-top: 70px;
            height: calc(100vh - 70px);
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            padding: 1.5rem 0;
            position: fixed;
            left: 0;
            top: 70px;
            bottom: 0;
            overflow-y: auto;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 998;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .nav-section {
            padding: 0 1rem;
            margin-bottom: 2rem;
        }

        .nav-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
            padding: 0 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            margin-bottom: 0.25rem;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition-base);
            color: var(--text-secondary);
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--primary);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--gradient-primary);
            color: white;
            font-weight: 500;
        }

        .nav-item.active::before {
            transform: translateX(0);
        }

        .nav-icon {
            font-size: 1.1rem;
            width: 24px;
            text-align: center;
        }

        .nav-text {
            font-size: 0.9rem;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--danger);
            color: white;
            font-size: 0.7rem;
            padding: 0.1rem 0.5rem;
            border-radius: 10px;
        }

        /* Conte√∫do principal */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 2rem;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            height: 100%;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Dashboard Cards */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
            transition: var(--transition-base);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: var(--gradient-primary);
            opacity: 0.1;
            border-radius: 50%;
            transform: translate(30px, -30px);
            transition: transform 0.3s ease;
        }

        .stat-card:hover::before {
            transform: translate(20px, -20px) scale(1.2);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .stat-info h3 {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: var(--transition-base);
        }

        .stat-card:hover .stat-icon {
            background: var(--gradient-primary);
            color: white;
            transform: scale(1.1);
        }

        .stat-footer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            font-size: 0.875rem;
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: 500;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        .stat-period {
            color: var(--text-secondary);
        }

        /* Gr√°ficos */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            min-height: 400px; /* Altura m√≠nima em vez de fixa */
            height: auto; /* Altura autom√°tica */
            overflow: visible; /* Permite que o conte√∫do seja vis√≠vel */
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .chart-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chart-options {
            display: flex;
            gap: 0.5rem;
        }

        .chart-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-base);
        }

        .chart-btn:hover,
        .chart-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Canvas dos gr√°ficos - altura responsiva */
        .chart-card canvas {
            max-height: 350px !important;
            height: 350px !important;
            width: 100% !important;
            display: block !important;
        }

        /* Container dos gr√°ficos - permitir crescimento responsivo */
        .chart-card {
            position: relative;
        }

        .chart-card > div {
            min-height: 350px !important;
            height: auto !important;
            overflow: visible !important;
        }

        /* Tabelas melhoradas */
        .table-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .table-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .table-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-table {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            min-width: 250px;
            transition: var(--transition-base);
        }

        .search-table:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .add-btn {
            padding: 0.75rem 1.5rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .table-container {
            overflow-x: auto;
        }

        .modern-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        .modern-table th {
            background: var(--bg-tertiary);
            padding: 1rem 1.5rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }

        .modern-table td {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            transition: var(--transition-base);
        }

        .modern-table tr:hover td {
            background: var(--bg-tertiary);
        }

        .modern-table tr:last-child td {
            border-bottom: none;
        }

        /* Status badges melhorados */
        .status-badge {
            padding: 0.375rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .status-badge::before {
            content: '';
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .status-active {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .status-approved {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .status-rejected {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        /* Bot√µes de a√ß√£o melhorados */
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.5rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition-base);
            color: var(--text-secondary);
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .action-btn.danger:hover {
            background: var(--danger);
            border-color: var(--danger);
        }

        /* Modal melhorado */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: var(--transition-base);
        }

        .modal-close:hover {
            background: var(--bg-tertiary);
            color: var(--danger);
        }

        /* Estilos do Perfil Melhorado */
        .profile-container {
            max-width: 100%;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 20px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .profile-avatar {
            position: relative;
            z-index: 1;
        }

        .avatar-circle {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .status-indicator {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid white;
            background: var(--success);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .status-indicator.active {
            background: var(--success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        .profile-info {
            z-index: 1;
            color: white;
        }

        .profile-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .profile-email {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .profile-role {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .profile-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .info-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .info-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .card-content h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .card-content p {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .profile-stats {
            background: var(--bg-tertiary);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .profile-stats h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .profile-stats h3::before {
            content: 'üìä';
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .profile-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .profile-btn {
            min-width: 140px;
            justify-content: center;
            font-weight: 600;
            padding: 0.875rem 1.5rem;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .profile-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--accent) 0%, #7c3aed 100%);
            color: white;
        }

        .btn-accent:hover {
            background: linear-gradient(135deg, #7c3aed 0%, var(--accent) 100%);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .profile-header {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem;
            }

            .profile-cards {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .profile-actions {
                flex-direction: column;
            }

            .profile-btn {
                width: 100%;
            }
        }

        /* Estilos para formul√°rios de edi√ß√£o */
        .profile-edit-form,
        .password-change-form {
            max-width: 100%;
        }

        /* Estilos para hist√≥rico de atividades */
        .activity-log {
            max-width: 100%;
        }

        .activity-filters {
            margin-bottom: 1.5rem;
        }

        .activity-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }

        .activity-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .activity-icon.error {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
        }

        .activity-content {
            flex: 1;
        }

        .activity-content h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .activity-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .activity-time {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Estilos para altera√ß√£o de senha */
        .password-requirements {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }

        .password-requirements h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .password-requirements ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .password-requirements li {
            padding: 0.5rem 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .password-requirements li::before {
            content: '‚óã';
            color: var(--text-secondary);
            font-weight: bold;
        }

        .password-requirements li.valid::before {
            content: '‚úì';
            color: var(--success);
        }

        .password-input-group {
            position: relative;
            display: flex;
            align-items: center;
        }

        .password-input-group .form-input {
            padding-right: 3rem;
        }

        .password-toggle-btn {
            position: absolute;
            right: 0.75rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .password-toggle-btn:hover {
            color: var(--primary);
            background: var(--bg-tertiary);
        }

        .password-strength {
            margin-top: 0.75rem;
        }

        .strength-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .strength-fill {
            height: 100%;
            background: var(--danger);
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .strength-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .no-activities {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .no-activities i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .no-activities p {
            font-size: 1rem;
            margin: 0;
        }

        /* Formul√°rios melhorados */
        .form-grid {
            display: grid;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-label {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .form-input,
        .form-select,
        .form-textarea {
            padding: 0.75rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            transition: var(--transition-base);
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-helper {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-primary);
        }

        /* Notifica√ß√µes toast */
        .toast-container {
            position: fixed;
            top: 90px;
            right: 20px;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .toast {
            background: var(--bg-secondary);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            animation: slideInRight 0.3s ease;
            border-left: 4px solid;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast.success {
            border-color: var(--success);
        }

        .toast.error {
            border-color: var(--danger);
        }

        .toast.warning {
            border-color: var(--warning);
        }

        .toast.info {
            border-color: var(--info);
        }

        .toast-icon {
            font-size: 1.25rem;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .toast-message {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.25rem;
        }

        /* Loading states */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 3rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty states */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .empty-description {
            font-size: 0.875rem;
        }

        /* Responsividade */
        @media (max-width: 1024px) {
            .menu-toggle {
                display: block;
            }

            .search-bar {
                display: none;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar:not(.collapsed) {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
            }

            .user-info {
                display: none;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .table-actions {
                flex-direction: column;
                width: 100%;
            }

            .search-table {
                width: 100%;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 1rem;
                width: calc(100% - 2rem);
            }
        }

        /* Anima√ß√µes extras */
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }

        .bounce {
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }

        /* Page content */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Overlays para modais */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 999;
            display: none;
        }

        /* Estilos para modais do perfil */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: var(--transition-base);
        }

        .modal-close:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 1.5rem 0;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Estilos para bot√µes nos modais */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-primary);
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            background: var(--accent-hover);
        }
    </style>
</head>
<body>
    <!-- Header Superior -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <img src="logosemfundo.png" alt="R√°dio Alo Voce" class="logo-img">
                    <span class="logo-text">R√°dio Alo Voce</span>
                </div>
                <div class="search-bar">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Pesquisar...">
                </div>
            </div>
            <div class="header-right">
                <button class="notification-btn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
                <button class="notification-btn" onclick="closeAllModals()" title="Fechar todos os modais (emerg√™ncia)">
                    <i class="fas fa-times-circle"></i>
                </button>
                <button class="notification-btn" onclick="fixChartsGrowth()" title="Corrigir gr√°ficos (emerg√™ncia)">
                    <i class="fas fa-chart-line"></i>
                </button>
                <div class="user-menu" id="userMenu" onclick="toggleDropdown()">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <span class="user-name">Admin</span>
                        <span class="user-role">Administrador</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <!-- User Dropdown Menu (fora do bot√£o, para evitar conflito de eventos) -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="user-dropdown-header">
                        <div class="user-dropdown-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-dropdown-name">Admin</div>
                        <div class="user-dropdown-role">Administrador</div>
                    </div>
                                    <div class="user-dropdown-menu">
                    <a href="#" class="user-dropdown-item" onclick="console.log('üß™ Clique detectado em Meu Perfil (Teste)'); testShowUserProfile(); return false;">
                        <i class="fas fa-user-circle"></i>
                        <span>Meu Perfil (Teste)</span>
                    </a>
                    <a href="#" class="user-dropdown-item" onclick="console.log('üéØ Clique detectado em Meu Perfil'); showUserProfile(); return false;">
                        <i class="fas fa-user-circle"></i>
                        <span>Meu Perfil</span>
                    </a>
                        <a href="#" class="user-dropdown-item" onclick="console.log('‚öôÔ∏è Clique detectado em Configura√ß√µes'); showUserSettings(); return false;">
                            <i class="fas fa-cog"></i>
                            <span>Configura√ß√µes</span>
                        </a>
                        <a href="#" class="user-dropdown-item" onclick="console.log('üìä Clique detectado em Informa√ß√µes do Sistema'); showSystemInfo(); return false;">
                            <i class="fas fa-info-circle"></i>
                            <span>Informa√ß√µes do Sistema</span>
                        </a>
                        <div class="user-dropdown-divider"></div>
                        <a href="#" class="user-dropdown-item" onclick="console.log('üíæ Clique detectado em Backup de Dados'); showBackupOptions(); return false;">
                            <i class="fas fa-download"></i>
                            <span>Backup de Dados</span>
                        </a>
                        <a href="#" class="user-dropdown-item" onclick="console.log('üîÑ Clique detectado em Status de Sincroniza√ß√£o'); showSyncStatus(); return false;">
                            <i class="fas fa-sync"></i>
                            <span>Status de Sincroniza√ß√£o</span>
                        </a>
                        <div class="user-dropdown-divider"></div>
                        <a href="#" class="user-dropdown-item danger" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Sair</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Layout Principal -->
    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <nav class="nav-section">
                <div class="nav-title">Principal</div>
                <a href="#" class="nav-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-dashboard nav-icon"></i>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('propagandas')">
                    <i class="fas fa-bullhorn nav-icon"></i>
                    <span class="nav-text">Propagandas</span>
                    <span class="nav-badge">5</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('noticias')">
                    <i class="fas fa-newspaper nav-icon"></i>
                    <span class="nav-text">Not√≠cias</span>
                    <span class="nav-badge">2</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('falecimentos')">
                    <i class="fas fa-cross nav-icon"></i>
                    <span class="nav-text">Falecimentos</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('eventos')">
                    <i class="fas fa-calendar-days nav-icon"></i>
                    <span class="nav-text">Eventos</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('vendas')">
                    <i class="fas fa-shopping-cart nav-icon"></i>
                    <span class="nav-text">Mural de Vendas</span>
                    <span class="nav-badge" id="vendasBadge">0</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('promocoes')">
                    <i class="fas fa-tags nav-icon"></i>
                    <span class="nav-text">Promo√ß√µes</span>
                    <span class="nav-badge" id="promocoesBadge">0</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('recados')">
                    <i class="fas fa-envelope nav-icon"></i>
                    <span class="nav-text">Recados</span>
                    <span class="nav-badge" id="recadosBadge">0</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('vagas')">
                    <i class="fas fa-briefcase nav-icon"></i>
                    <span class="nav-text">Vagas de Emprego</span>
                    <span class="nav-badge" id="vagasBadge">0</span>
                </a>
            </nav>
            
            <nav class="nav-section">
                <div class="nav-title">Sistema</div>
                <a href="#" class="nav-item">
                    <i class="fas fa-chart-line nav-icon"></i>
                    <span class="nav-text">Analytics</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-users nav-icon"></i>
                    <span class="nav-text">Usu√°rios</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-cog nav-icon"></i>
                    <span class="nav-text">Configura√ß√µes</span>
                </a>
                <a href="#" class="nav-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt nav-icon"></i>
                    <span class="nav-text">Sair</span>
                </a>
            </nav>
        </aside>

        <!-- Conte√∫do Principal -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard -->
            <div id="dashboard" class="page-content active">
                <div class="page-header" style="margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h1 class="page-title" style="font-size: 2rem; font-weight: 800; color: var(--text-primary); margin-bottom: 0.5rem;">Dashboard</h1>
                            <p class="page-subtitle" style="color: var(--text-secondary);">Vis√£o geral do sistema - R√°dio Alo Voce</p>
                        </div>
                        <button onclick="forceUpdateDashboard()" class="add-btn" style="background: var(--primary); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-sync-alt"></i>
                            Atualizar Dashboard
                        </button>
                    </div>
                </div>

                <!-- Cards de Estat√≠sticas -->
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-info">
                                <h3>Propagandas Ativas</h3>
                                <div class="stat-value" id="totalPropagandas">0</div>
                            </div>
                            <div class="stat-icon" style="color: var(--primary);">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                        </div>
                        <div class="stat-footer">
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span id="crescimentoPropagandas">12%</span>
                            </div>
                            <span class="stat-period">vs m√™s anterior</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-info">
                                <h3>Not√≠cias Pendentes</h3>
                                <div class="stat-value" id="noticiasPendentes">0</div>
                            </div>
                            <div class="stat-icon" style="color: var(--warning);">
                                <i class="fas fa-newspaper"></i>
                            </div>
                        </div>
                        <div class="stat-footer">
                            <div class="stat-change negative">
                                <i class="fas fa-arrow-down"></i>
                                <span id="crescimentoNoticias">5%</span>
                            </div>
                            <span class="stat-period">vs m√™s anterior</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-info">
                                <h3>Ouvintes Online</h3>
                                <div class="stat-value" id="ouvintesOnline">0</div>
                            </div>
                            <div class="stat-icon" style="color: var(--info);">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                        <div class="stat-footer">
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span id="crescimentoOuvintes">23%</span>
                            </div>
                            <span class="stat-period">vs m√™s anterior</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-info">
                                <h3>Receita Mensal</h3>
                                <div class="stat-value" id="receitaMensal">R$ 4.580</div>
                            </div>
                            <div class="stat-icon" style="color: var(--success);">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                        </div>
                        <div class="stat-footer">
                            <div class="stat-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span id="crescimentoReceita">18%</span>
                            </div>
                            <span class="stat-period">vs m√™s anterior</span>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Audi√™ncia da Semana</h3>
                            <div class="chart-options">
                                <button class="chart-btn active">Semana</button>
                                <button class="chart-btn">M√™s</button>
                                <button class="chart-btn">Ano</button>
                            </div>
                        </div>
                        <canvas id="audienceChart" height="300"></canvas>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Receita por Categoria</h3>
                        </div>
                        <canvas id="revenueChart" height="300"></canvas>
                    </div>
                </div>

                <!-- Atividades Recentes -->
                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Atividades Recentes</h3>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>A√ß√£o</th>
                                    <th>Usu√°rio</th>
                                    <th>Data</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="atividadesRecentes">
                                <tr>
                                    <td>Nova propaganda aprovada</td>
                                    <td>Admin</td>
                                    <td>H√° 2 minutos</td>
                                    <td><span class="status-badge status-approved">Sucesso</span></td>
                                </tr>
                                <tr>
                                    <td>Not√≠cia publicada</td>
                                    <td>Admin</td>
                                    <td>H√° 15 minutos</td>
                                    <td><span class="status-badge status-approved">Sucesso</span></td>
                                </tr>
                                <tr>
                                    <td>Evento adicionado</td>
                                    <td>Admin</td>
                                    <td>H√° 1 hora</td>
                                    <td><span class="status-badge status-approved">Sucesso</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Propagandas -->
            <div id="propagandas" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Gerenciar Propagandas</h1>
                    <p class="page-subtitle">Controle todas as propagandas da r√°dio</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Propagandas</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar propagandas..." onkeyup="searchTable('propagandasList', this.value)">
                            <button class="add-btn" onclick="addPropaganda()">
                                <i class="fas fa-plus"></i>
                                Nova Propaganda
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Empresa</th>
                                    <th>Dura√ß√£o</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>In√≠cio</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="propagandasList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Not√≠cias -->
            <div id="noticias" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Gerenciar Not√≠cias</h1>
                    <p class="page-subtitle">Administre as not√≠cias patrocinadas</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Not√≠cias</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar not√≠cias..." onkeyup="searchTable('noticiasList', this.value)">
                            <button class="add-btn" onclick="addNoticia()">
                                <i class="fas fa-plus"></i>
                                Nova Not√≠cia
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>T√≠tulo</th>
                                    <th>Empresa</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>Publica√ß√£o</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="noticiasList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Falecimentos -->
            <div id="falecimentos" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Notas de Falecimento</h1>
                    <p class="page-subtitle">Gerencie as notas de falecimento</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Notas</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar notas..." onkeyup="searchTable('notasFalecimentoList', this.value)">
                            <button class="add-btn" onclick="addNotaFalecimento()">
                                <i class="fas fa-plus"></i>
                                Nova Nota
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Apelido</th>
                                    <th>Idade</th>
                                    <th>Empresa</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="notasFalecimentoList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Eventos -->
            <div id="eventos" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Gerenciar Eventos</h1>
                    <p class="page-subtitle">Administre os eventos da cidade</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Eventos</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar eventos..." onkeyup="searchTable('eventosList', this.value)">
                            <button class="add-btn" onclick="addEvento()">
                                <i class="fas fa-plus"></i>
                                Novo Evento
                            </button>
                            <button class="btn btn-secondary" onclick="sincronizarEventos()">
                                <i class="fas fa-sync"></i>
                                Sincronizar
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>T√≠tulo</th>
                                    <th>Data</th>
                                    <th>Local</th>
                                    <th>Categoria</th>
                                    <th>Destaque</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="eventosList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Vendas -->
            <div id="vendas" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Mural de Vendas</h1>
                    <p class="page-subtitle">Gerencie os an√∫ncios de vendas da comunidade</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Produtos/Servi√ßos</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar produtos..." onkeyup="searchTable('vendasList', this.value)">
                            <button class="add-btn" onclick="addVenda()">
                                <i class="fas fa-plus"></i>
                                Novo An√∫ncio
                            </button>
                            <button class="btn btn-secondary" onclick="sincronizarVendas()">
                                <i class="fas fa-sync"></i>
                                Sincronizar
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Produto/Servi√ßo</th>
                                    <th>Categoria</th>
                                    <th>Pre√ßo</th>
                                    <th>Vendedor</th>
                                    <th>Status</th>
                                    <th>Destaque</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="vendasList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Promo√ß√µes -->
            <div id="promocoes" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Gerenciar Promo√ß√µes</h1>
                    <p class="page-subtitle">Administre as ofertas e promo√ß√µes das empresas</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Promo√ß√µes</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar promo√ß√µes..." onkeyup="searchTable('promocoesList', this.value)">
                            <button class="add-btn" onclick="addPromocao()">
                                <i class="fas fa-plus"></i>
                                Nova Promo√ß√£o
                            </button>
                            <button class="btn btn-secondary" onclick="sincronizarPromocoes()">
                                <i class="fas fa-sync"></i>
                                Sincronizar
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Promo√ß√£o</th>
                                    <th>Empresa</th>
                                    <th>Categoria</th>
                                    <th>Desconto</th>
                                    <th>Validade</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="promocoesList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Recados -->
            <div id="recados" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Mural de Recados</h1>
                    <p class="page-subtitle">Gerencie os recados dos ouvintes da r√°dio</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Recados</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar recados..." onkeyup="searchTable('recadosList', this.value)">
                            <button class="add-btn" onclick="addRecado()">
                                <i class="fas fa-plus"></i>
                                Novo Recado
                            </button>
                            <button class="btn btn-secondary" onclick="sincronizarRecados()">
                                <i class="fas fa-sync"></i>
                                Sincronizar
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Remetente</th>
                                    <th>Destinat√°rio</th>
                                    <th>Tipo</th>
                                    <th>Mensagem</th>
                                    <th>Data</th>
                                    <th>Status</th>
                                    <th>Lido no Ar</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="recadosList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- P√°gina de Vagas de Emprego -->
            <div id="vagas" class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Vagas de Emprego</h1>
                    <p class="page-subtitle">Gerencie as oportunidades de trabalho da regi√£o</p>
                </div>

                <div class="table-card">
                    <div class="table-header">
                        <h3 class="table-title">Lista de Vagas</h3>
                        <div class="table-actions">
                            <input type="text" class="search-table" placeholder="Buscar vagas..." onkeyup="searchTable('vagasList', this.value)">
                            <button class="add-btn" onclick="addVaga()">
                                <i class="fas fa-plus"></i>
                                Nova Vaga
                            </button>
                            <button class="btn btn-secondary" onclick="sincronizarVagas()">
                                <i class="fas fa-sync"></i>
                                Sincronizar
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>Cargo</th>
                                    <th>Empresa</th>
                                    <th>√Årea</th>
                                    <th>Sal√°rio</th>
                                    <th>Cidade</th>
                                    <th>Status</th>
                                    <th>Urgente</th>
                                    <th>Destaque</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="vagasList">
                                <!-- Dados carregados dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Container de Notifica√ß√µes Toast -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal de Propaganda -->
    <div class="modal" id="propagandaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nova Propaganda</h2>
                <button class="modal-close" onclick="closeModal('propagandaModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="propagandaForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">Nome da Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Dura√ß√£o (segundos)</label>
                        <select class="form-select" name="duracao" required>
                            <option value="15">15 segundos</option>
                            <option value="30">30 segundos</option>
                            <option value="45">45 segundos</option>
                            <option value="60">60 segundos</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" name="valor" step="0.01" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Data de In√≠cio</label>
                        <input type="date" class="form-input" name="dataInicio" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Data de Fim</label>
                        <input type="date" class="form-input" name="dataFim" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea class="form-textarea" name="descricao" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Telefone</label>
                    <input type="tel" class="form-input" name="telefone">
                </div>

                <div class="form-group">
                    <label class="form-label">Website</label>
                    <input type="url" class="form-input" name="website">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('propagandaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Propaganda
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Not√≠cia -->
    <div class="modal" id="noticiaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nova Not√≠cia</h2>
                <button class="modal-close" onclick="closeModal('noticiaModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="noticiaForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">T√≠tulo da Not√≠cia</label>
                    <input type="text" class="form-input" name="titulo" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Conte√∫do</label>
                    <textarea class="form-textarea" name="conteudo" rows="5" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" name="valor" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Data de Publica√ß√£o</label>
                        <input type="datetime-local" class="form-input" name="dataPublicacao" required>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('noticiaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Not√≠cia
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Nota de Falecimento -->
    <div class="modal" id="notaFalecimentoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nova Nota de Falecimento</h2>
                <button class="modal-close" onclick="closeModal('notaFalecimentoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="notaFalecimentoForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">Nome</label>
                    <input type="text" class="form-input" name="nome" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Apelido</label>
                        <input type="text" class="form-input" name="apelido">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Idade</label>
                        <input type="number" class="form-input" name="idade" min="0" max="150">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Empresa/Funer√°ria</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Mensagem</label>
                    <textarea class="form-textarea" name="mensagem" rows="4"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('notaFalecimentoModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Nota
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Evento -->
    <div class="modal" id="eventoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Novo Evento</h2>
                <button class="modal-close" onclick="closeModal('eventoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="eventoForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">T√≠tulo do Evento</label>
                    <input type="text" class="form-input" name="titulo" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea class="form-textarea" name="descricao" rows="3" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-input" name="data" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Hora</label>
                        <input type="time" class="form-input" name="hora" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Local</label>
                    <input type="text" class="form-input" name="local" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" name="categoria" required>
                            <option value="M√∫sica">M√∫sica</option>
                            <option value="Festival">Festival</option>
                            <option value="Teatro">Teatro</option>
                            <option value="Esporte">Esporte</option>
                            <option value="Cultural">Cultural</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Pre√ßo</label>
                        <input type="text" class="form-input" name="preco" placeholder="Ex: Gratuito, R$ 20,00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Organizador</label>
                    <input type="text" class="form-input" name="organizador">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" name="telefone">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">E-mail</label>
                        <input type="email" class="form-input" name="email">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('eventoModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Evento
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAIS DE EDI√á√ÉO -->

    <!-- Modal de Editar Propaganda -->
    <div class="modal" id="editPropagandaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Editar Propaganda</h2>
                <button class="modal-close" onclick="closeModal('editPropagandaModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editPropagandaForm" class="form-grid">
                <input type="hidden" name="id" id="editPropagandaId">
                
                <div class="form-group">
                    <label class="form-label">Nome da Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Dura√ß√£o (segundos)</label>
                        <select class="form-select" name="duracao" required>
                            <option value="15">15 segundos</option>
                            <option value="30">30 segundos</option>
                            <option value="45">45 segundos</option>
                            <option value="60">60 segundos</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" name="valor" step="0.01" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Data de In√≠cio</label>
                        <input type="date" class="form-input" name="dataInicio" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Data de Fim</label>
                        <input type="date" class="form-input" name="dataFim" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                        <option value="pendente">Pendente</option>
                        <option value="ativa">Ativa</option>
                        <option value="rejeitada">Rejeitada</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea class="form-textarea" name="descricao" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Telefone</label>
                    <input type="tel" class="form-input" name="telefone">
                </div>

                <div class="form-group">
                    <label class="form-label">Website</label>
                    <input type="url" class="form-input" name="website">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editPropagandaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Altera√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Editar Not√≠cia -->
    <div class="modal" id="editNoticiaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Editar Not√≠cia</h2>
                <button class="modal-close" onclick="closeModal('editNoticiaModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editNoticiaForm" class="form-grid">
                <input type="hidden" name="id" id="editNoticiaId">
                
                <div class="form-group">
                    <label class="form-label">T√≠tulo da Not√≠cia</label>
                    <input type="text" class="form-input" name="titulo" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Conte√∫do</label>
                    <textarea class="form-textarea" name="conteudo" rows="5" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" name="valor" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Data de Publica√ß√£o</label>
                        <input type="datetime-local" class="form-input" name="dataPublicacao" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                        <option value="pendente">Pendente</option>
                        <option value="aprovada">Aprovada</option>
                        <option value="rejeitada">Rejeitada</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editNoticiaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Altera√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Editar Evento -->
    <div class="modal" id="editEventoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Editar Evento</h2>
                <button class="modal-close" onclick="closeModal('editEventoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editEventoForm" class="form-grid">
                <input type="hidden" name="id" id="editEventoId">
                
                <div class="form-group">
                    <label class="form-label">T√≠tulo do Evento</label>
                    <input type="text" class="form-input" name="titulo" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea class="form-textarea" name="descricao" rows="3" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-input" name="data" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Hora</label>
                        <input type="time" class="form-input" name="hora" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Local</label>
                    <input type="text" class="form-input" name="local" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" name="categoria" required>
                            <option value="M√∫sica">M√∫sica</option>
                            <option value="Festival">Festival</option>
                            <option value="Teatro">Teatro</option>
                            <option value="Esporte">Esporte</option>
                            <option value="Cultural">Cultural</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Pre√ßo</label>
                        <input type="text" class="form-input" name="preco" placeholder="Ex: Gratuito, R$ 20,00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Organizador</label>
                    <input type="text" class="form-input" name="organizador">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" name="telefone">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">E-mail</label>
                        <input type="email" class="form-input" name="email">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                        <option value="ativo">Ativo</option>
                        <option value="pendente">Pendente</option>
                        <option value="rejeitado">Rejeitado</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" name="destaque" style="margin-right: 0.5rem;">
                        Evento em destaque
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editEventoModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Altera√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Editar Nota de Falecimento -->
    <div class="modal" id="editNotaFalecimentoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Editar Nota de Falecimento</h2>
                <button class="modal-close" onclick="closeModal('editNotaFalecimentoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editNotaFalecimentoForm" class="form-grid">
                <input type="hidden" name="id" id="editNotaFalecimentoId">
                
                <div class="form-group">
                    <label class="form-label">Nome</label>
                    <input type="text" class="form-input" name="nome" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Apelido</label>
                        <input type="text" class="form-input" name="apelido">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Idade</label>
                        <input type="number" class="form-input" name="idade" min="0" max="150">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Empresa/Funer√°ria</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Mensagem</label>
                    <textarea class="form-textarea" name="mensagem" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                        <option value="pendente">Pendente</option>
                        <option value="ativa">Ativa</option>
                        <option value="rejeitada">Rejeitada</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editNotaFalecimentoModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Altera√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Venda -->
    <div class="modal" id="vendaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Novo An√∫ncio de Venda</h2>
                <button class="modal-close" onclick="closeModal('vendaModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="vendaForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">T√≠tulo do Produto/Servi√ßo</label>
                    <input type="text" class="form-input" name="titulo" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" name="categoria" required>
                            <option value="">Selecione uma categoria</option>
                            <option value="veiculos">Ve√≠culos</option>
                            <option value="imoveis">Im√≥veis</option>
                            <option value="eletronicos">Eletr√¥nicos</option>
                            <option value="casa">Casa & Jardim</option>
                            <option value="roupas">Roupas & Acess√≥rios</option>
                            <option value="servicos">Servi√ßos</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Pre√ßo</label>
                        <input type="text" class="form-input" name="preco" placeholder="R$ 0,00 ou 'A combinar">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea class="form-textarea" name="descricao" rows="4" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Condi√ß√£o</label>
                        <select class="form-select" name="condicao" required>
                            <option value="novo">Novo</option>
                            <option value="usado">Usado</option>
                            <option value="seminovo">Semi-novo</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-select" name="status" required>
                            <option value="ativo">Ativo</option>
                            <option value="inativo">Inativo</option>
                            <option value="vendido">Vendido</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Nome do Vendedor</label>
                        <input type="text" class="form-input" name="vendedor" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" name="telefone" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">E-mail</label>
                    <input type="email" class="form-input" name="email">
                </div>
                
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" name="destaque">
                        <span class="checkbox-custom"></span>
                        Produto em destaque (ser√° lido no ar)
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('vendaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar An√∫ncio
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Promo√ß√£o -->
    <div class="modal" id="promocaoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nova Promo√ß√£o</h2>
                <button class="modal-close" onclick="closeModal('promocaoModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="promocaoForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">Nome da Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" name="categoria" required>
                            <option value="">Selecione uma categoria</option>
                            <option value="alimentacao">Alimenta√ß√£o</option>
                            <option value="moda">Moda & Beleza</option>
                            <option value="saude">Sa√∫de & Bem-estar</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="servicos">Servi√ßos</option>
                            <option value="casa">Casa & Decora√ß√£o</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Desconto</label>
                        <input type="text" class="form-input" name="desconto" placeholder="Ex: 50% ou R$ 100,00 OFF">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">T√≠tulo da Promo√ß√£o</label>
                    <input type="text" class="form-input" name="titulo" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o da Oferta</label>
                    <textarea class="form-textarea" name="descricao" rows="4" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">V√°lida At√©</label>
                        <input type="date" class="form-input" name="validade" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-select" name="status" required>
                            <option value="ativo">Ativo</option>
                            <option value="inativo">Inativo</option>
                            <option value="expirado">Expirado</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="tel" class="form-input" name="telefone" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Endere√ßo</label>
                        <input type="text" class="form-input" name="endereco">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Site/Instagram</label>
                    <input type="url" class="form-input" name="website">
                </div>
                
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" name="destaque">
                        <span class="checkbox-custom"></span>
                        Promo√ß√£o em destaque (ser√° divulgada no ar)
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('promocaoModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Promo√ß√£o
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Nova Vaga -->
    <div class="modal" id="vagaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nova Vaga de Emprego</h2>
                <button class="modal-close" onclick="closeModal('vagaModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="vagaForm" class="form-grid">
                <div class="form-group">
                    <label class="form-label">Cargo</label>
                    <input type="text" class="form-input" name="cargo" placeholder="Ex: Vendedor, Desenvolvedor" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">√Årea</label>
                        <select class="form-select" name="area" required>
                            <option value="">Selecione a √°rea</option>
                            <option value="vendas">Vendas</option>
                            <option value="administrativo">Administrativo</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="saude">Sa√∫de</option>
                            <option value="educacao">Educa√ß√£o</option>
                            <option value="servicos">Servi√ßos</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Sal√°rio</label>
                        <input type="text" class="form-input" name="salario" placeholder="Ex: R$ 2.500,00 ou A combinar">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o da Vaga</label>
                    <textarea class="form-textarea" name="descricao" rows="4" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Contato</label>
                        <input type="text" class="form-input" name="contato" placeholder="Telefone, email ou WhatsApp" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cidade</label>
                        <input type="text" class="form-input" name="cidade" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" name="urgente">
                        <span class="checkbox-custom"></span>
                        Vaga urgente
                    </label>
                </div>
                
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" name="destaque">
                        <span class="checkbox-custom"></span>
                        Destacar vaga
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('vagaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Vaga
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Editar Vaga -->
    <div class="modal" id="editVagaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Editar Vaga de Emprego</h2>
                <button class="modal-close" onclick="closeModal('editVagaModal')" style="cursor: pointer; z-index: 10001; position: relative;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editVagaForm" class="form-grid">
                <input type="hidden" name="id" id="editVagaId">
                
                <div class="form-group">
                    <label class="form-label">Cargo</label>
                    <input type="text" class="form-input" name="cargo" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Empresa</label>
                    <input type="text" class="form-input" name="empresa" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">√Årea</label>
                        <select class="form-select" name="area" required>
                            <option value="">Selecione a √°rea</option>
                            <option value="vendas">Vendas</option>
                            <option value="administrativo">Administrativo</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="saude">Sa√∫de</option>
                            <option value="educacao">Educa√ß√£o</option>
                            <option value="servicos">Servi√ßos</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Sal√°rio</label>
                        <input type="text" class="form-input" name="salario" placeholder="Ex: R$ 2.500,00 ou A combinar">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o da Vaga</label>
                    <textarea class="form-textarea" name="descricao" rows="4" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Contato</label>
                        <input type="text" class="form-input" name="contato" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cidade</label>
                        <input type="text" class="form-input" name="cidade" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status" required>
                        <option value="ativo">Ativo</option>
                        <option value="pendente">Pendente</option>
                        <option value="preenchido">Preenchido</option>
                        <option value="expirado">Expirado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" name="urgente">
                        <span class="checkbox-custom"></span>
                        Urgente
                    </label>
                </div>
                
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" name="destaque">
                        <span class="checkbox-custom"></span>
                        Destaque
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editVagaModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Salvar Altera√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="admin-sistema.js"></script>
    <script>
        // Inicializar sistema
        // let adminSystem; // Remover esta linha duplicada
        
        document.addEventListener('DOMContentLoaded', function() {
            // Garantir que todos os modais estejam fechados na inicializa√ß√£o
            console.log('üîß Inicializando sistema admin...');
            
            // Criar dados de teste se n√£o existirem
            if (!localStorage.getItem('adminSession')) {
                localStorage.setItem('adminSession', JSON.stringify({
                    username: 'Administrador',
                    email: 'admin@radioalovoce.com.br',
                    loginTime: new Date().toISOString(),
                    isAuthenticated: true
                }));
                console.log('‚úÖ Dados de sess√£o criados');
            }
            
            if (!localStorage.getItem('adminProfile')) {
                localStorage.setItem('adminProfile', JSON.stringify({
                    nome: 'Administrador',
                    email: 'admin@radioalovoce.com.br',
                    telefone: '(11) 99999-9999',
                    cargo: 'Administrador Geral',
                    dataCriacao: '2024-01-01',
                    ultimaAtualizacao: new Date().toISOString()
                }));
                console.log('‚úÖ Dados do perfil criados');
            }
            
            const allModals = document.querySelectorAll('.modal');
            allModals.forEach(modal => {
                modal.style.display = 'none';
                console.log('‚úÖ Modal fechado:', modal.id || 'sem ID');
            });
            
            // Inicializar sistema de eventos
            if (window.EventosAdmin) {
                window.eventosAdmin = new EventosAdmin();
            }
            
            // Configurar formul√°rio de eventos (criar)
            const eventoForm = document.getElementById('eventoForm');
            if (eventoForm) {
                eventoForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(eventoForm);
                    const dadosEvento = {
                        titulo: formData.get('titulo'),
                        descricao: formData.get('descricao'),
                        data: formData.get('data'),
                        hora: formData.get('hora'),
                        local: formData.get('local'),
                        categoria: formData.get('categoria'),
                        preco: formData.get('preco') || 'Consultar',
                        organizador: formData.get('organizador') || 'N√£o informado',
                        telefone: formData.get('telefone') || '',
                        email: formData.get('email') || ''
                    };
                    
                    // Converter data para formato brasileiro
                    if (dadosEvento.data && dadosEvento.data.includes('-')) {
                        const partes = dadosEvento.data.split('-');
                        if (partes.length === 3) {
                            dadosEvento.data = `${partes[2]}/${partes[1]}/${partes[0]}`;
                        }
                    }
                    
                    if (window.eventosAdmin) {
                        window.eventosAdmin.addEvento(dadosEvento);
                    }
                    
                    eventoForm.reset();
                    closeModal('eventoModal');
                    showToast('Evento adicionado com sucesso!', 'success');
                });
            }
            
            // Inicializar gr√°ficos
            initCharts();
            
            // Configurar formul√°rios
            setupForms();
            
            // Aplicar tema salvo
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
            
            // Log de sucesso
            console.log('‚úÖ Sistema administrativo carregado com sucesso!');
            
            // Corre√ß√£o autom√°tica dos gr√°ficos ap√≥s 2 segundos
            setTimeout(() => {
                fixChartsGrowth();
            }, 2000);
        });

        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        }

        // Toggle Theme
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
            
            // Recriar gr√°ficos com novo tema
            initCharts();
        }

        function updateThemeIcon(theme) {
            const icon = document.getElementById('themeIcon');
            icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        }

        // Inicializar gr√°ficos
        function initCharts() {
            // Configurar containers dos gr√°ficos com altura responsiva
            const chartCards = document.querySelectorAll('.chart-card');
            chartCards.forEach(card => {
                card.style.minHeight = '400px';
                card.style.height = 'auto';
                card.style.overflow = 'visible';
            });

            // Configurar canvas com altura responsiva
            const canvases = document.querySelectorAll('.chart-card canvas');
            canvases.forEach(canvas => {
                canvas.style.height = '350px';
                canvas.style.maxHeight = '350px';
                canvas.style.width = '100%';
                canvas.style.display = 'block';
            });
            const isDarkMode = document.documentElement.getAttribute('data-theme') === 'dark';
            const textColor = isDarkMode ? '#f8fafc' : '#0f172a';
            const gridColor = isDarkMode ? '#334155' : '#e2e8f0';

            // Gr√°fico de Audi√™ncia
            const audienceCtx = document.getElementById('audienceChart');
            if (audienceCtx) {
                const existingChart = Chart.getChart(audienceCtx);
                if (existingChart) {
                    existingChart.destroy();
                }

                new Chart(audienceCtx, {
                    type: 'line',
                    data: {
                        labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'],
                        datasets: [{
                            label: 'Ouvintes',
                            data: [320, 342, 368, 334, 390, 384, 412],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            borderWidth: 2,
                            pointBackgroundColor: '#10b981',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 2,
                            pointRadius: 4,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 20,
                                bottom: 20,
                                left: 10,
                                right: 10
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: isDarkMode ? '#1e293b' : '#ffffff',
                                titleColor: textColor,
                                bodyColor: textColor,
                                borderColor: gridColor,
                                borderWidth: 1,
                                padding: 12,
                                displayColors: false,
                                callbacks: {
                                    label: function(context) {
                                        return context.parsed.y + ' ouvintes';
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: gridColor,
                                    borderColor: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            },
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: gridColor,
                                    borderColor: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            }
                        }
                    }
                });
            }

            // Gr√°fico de Receita
            const revenueCtx = document.getElementById('revenueChart');
            if (revenueCtx) {
                const existingChart = Chart.getChart(revenueCtx);
                if (existingChart) {
                    existingChart.destroy();
                }

                new Chart(revenueCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Propagandas', 'Not√≠cias', 'Eventos', 'Outros'],
                        datasets: [{
                            data: [45, 25, 20, 10],
                            backgroundColor: [
                                '#10b981',
                                '#3b82f6',
                                '#f59e0b',
                                '#8b5cf6'
                            ],
                            borderWidth: 0,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        layout: {
                            padding: {
                                top: 20,
                                bottom: 40,
                                left: 10,
                                right: 10
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: textColor,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: isDarkMode ? '#1e293b' : '#ffffff',
                                titleColor: textColor,
                                bodyColor: textColor,
                                borderColor: gridColor,
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: function(context) {
                                        return context.label + ': ' + context.parsed + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Fun√ß√£o para corrigir gr√°ficos que crescem infinitamente
        function fixChartsGrowth() {
            console.log('üîß Corrigindo gr√°ficos para exibi√ß√£o adequada...');
            
            // Configurar altura responsiva dos containers
            const chartCards = document.querySelectorAll('.chart-card');
            chartCards.forEach(card => {
                card.style.minHeight = '400px';
                card.style.height = 'auto';
                card.style.overflow = 'visible';
                card.style.maxHeight = 'none';
            });

            // Configurar altura responsiva dos canvas
            const canvases = document.querySelectorAll('.chart-card canvas');
            canvases.forEach(canvas => {
                canvas.style.height = '350px';
                canvas.style.maxHeight = '350px';
                canvas.style.width = '100%';
                canvas.style.overflow = 'visible';
                canvas.style.display = 'block';
            });

            // Destruir e recriar gr√°ficos se necess√°rio
            const audienceCtx = document.getElementById('audienceChart');
            const revenueCtx = document.getElementById('revenueChart');
            
            if (audienceCtx) {
                const existingChart = Chart.getChart(audienceCtx);
                if (existingChart) {
                    existingChart.destroy();
                }
            }
            
            if (revenueCtx) {
                const existingChart = Chart.getChart(revenueCtx);
                if (existingChart) {
                    existingChart.destroy();
                }
            }

            // Recriar gr√°ficos
            setTimeout(() => {
                initCharts();
                console.log('‚úÖ Gr√°ficos recriados com configura√ß√µes responsivas');
            }, 500);

            console.log('‚úÖ Gr√°ficos corrigidos!');
        }

        // Mostrar notifica√ß√£o toast
        function showToast(message, type = 'info', duration = 3000) {
            const toastContainer = document.getElementById('toastContainer');
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            
            toast.innerHTML = `
                <i class="fas ${icons[type]} toast-icon"></i>
                <div class="toast-content">
                    <div class="toast-title">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // Configurar formul√°rios
        function setupForms() {
            // Formul√°rio de Propaganda
            const propagandaForm = document.getElementById('propagandaForm');
            if (propagandaForm) {
                propagandaForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(propagandaForm);
                    const dados = Object.fromEntries(formData);
                    
                    adminSystem.addPropaganda(dados);
                    propagandaForm.reset();
                    closeModal('propagandaModal');
                    showToast('Propaganda adicionada com sucesso!', 'success');
                });
            }

            // Formul√°rio de Not√≠cia
            const noticiaForm = document.getElementById('noticiaForm');
            if (noticiaForm) {
                noticiaForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(noticiaForm);
                    const dados = Object.fromEntries(formData);
                    
                    adminSystem.addNoticia(dados);
                    noticiaForm.reset();
                    closeModal('noticiaModal');
                    showToast('Not√≠cia adicionada com sucesso!', 'success');
                });
            }

            // Formul√°rio de Nota de Falecimento
            const notaFalecimentoForm = document.getElementById('notaFalecimentoForm');
            if (notaFalecimentoForm) {
                notaFalecimentoForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(notaFalecimentoForm);
                    const dados = Object.fromEntries(formData);
                    
                    adminSystem.addNotaFalecimento(dados);
                    notaFalecimentoForm.reset();
                    closeModal('notaFalecimentoModal');
                    showToast('Nota de falecimento adicionada com sucesso!', 'success');
                });
            }

            // FORMUL√ÅRIOS DE EDI√á√ÉO

            // Formul√°rio de Editar Propaganda
            const editPropagandaForm = document.getElementById('editPropagandaForm');
            if (editPropagandaForm) {
                editPropagandaForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(editPropagandaForm);
                    const dados = Object.fromEntries(formData);
                    const id = parseInt(dados.id);
                    
                    // Remover o ID dos dados para evitar conflitos
                    delete dados.id;
                    
                    // Buscar e atualizar propaganda
                    const propagandas = JSON.parse(localStorage.getItem('radioAloVoce_propagandas') || '[]');
                    const index = propagandas.findIndex(p => p.id === id);
                    
                    if (index !== -1) {
                        // Manter dados importantes
                        const propagandaExistente = propagandas[index];
                        propagandas[index] = {
                            ...propagandaExistente,
                            ...dados,
                            id: id, // Manter ID original
                            dataEdicao: new Date().toISOString()
                        };
                        
                        localStorage.setItem('radioAloVoce_propagandas', JSON.stringify(propagandas));
                        
                        // Recarregar dados
                        if (adminSystem) {
                            adminSystem.loadPropagandas();
                            adminSystem.updateStats();
                        }
                        
                        closeModal('editPropagandaModal');
                        showToast('Propaganda atualizada com sucesso!', 'success');
                    } else {
                        showToast('Erro ao atualizar propaganda!', 'error');
                    }
                });
            }

            // Formul√°rio de Editar Not√≠cia
            const editNoticiaForm = document.getElementById('editNoticiaForm');
            if (editNoticiaForm) {
                editNoticiaForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(editNoticiaForm);
                    const dados = Object.fromEntries(formData);
                    const id = parseInt(dados.id);
                    
                    delete dados.id;
                    
                    const noticias = JSON.parse(localStorage.getItem('radioAloVoce_noticias') || '[]');
                    const index = noticias.findIndex(n => n.id === id);
                    
                    if (index !== -1) {
                        const noticiaExistente = noticias[index];
                        noticias[index] = {
                            ...noticiaExistente,
                            ...dados,
                            id: id,
                            dataEdicao: new Date().toISOString()
                        };
                        
                        localStorage.setItem('radioAloVoce_noticias', JSON.stringify(noticias));
                        
                        if (adminSystem) {
                            adminSystem.loadNoticias();
                            adminSystem.updateStats();
                        }
                        
                        closeModal('editNoticiaModal');
                        showToast('Not√≠cia atualizada com sucesso!', 'success');
                    } else {
                        showToast('Erro ao atualizar not√≠cia!', 'error');
                    }
                });
            }

            // Formul√°rio de Editar Evento
            const editEventoForm = document.getElementById('editEventoForm');
            if (editEventoForm) {
                editEventoForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(editEventoForm);
                    const dados = Object.fromEntries(formData);
                    const id = parseInt(dados.id);
                    
                    // Converter checkbox para boolean
                    dados.destaque = dados.destaque === 'on';
                    delete dados.id;
                    
                    // Converter data para formato brasileiro se necess√°rio
                    if (dados.data && dados.data.includes('-')) {
                        const partes = dados.data.split('-');
                        if (partes.length === 3) {
                            dados.data = `${partes[2]}/${partes[1]}/${partes[0]}`;
                        }
                    }
                    
                    const eventos = JSON.parse(localStorage.getItem('radioAloVoce_eventos') || '[]');
                    const index = eventos.findIndex(e => e.id === id);
                    
                    if (index !== -1) {
                        const eventoExistente = eventos[index];
                        eventos[index] = {
                            ...eventoExistente,
                            ...dados,
                            id: id,
                            dataEdicao: new Date().toISOString()
                        };
                        
                        localStorage.setItem('radioAloVoce_eventos', JSON.stringify(eventos));
                        
                        // Sincronizar com o site
                        if (window.eventosAdmin) {
                            window.eventosAdmin.loadEventos();
                            window.eventosAdmin.updateEventosStats();
                            window.eventosAdmin.sincronizarComSite();
                        }
                        
                        closeModal('editEventoModal');
                        showToast('Evento atualizado com sucesso!', 'success');
                    } else {
                        showToast('Erro ao atualizar evento!', 'error');
                    }
                });
            }

            // Formul√°rio de Editar Nota de Falecimento
            const editNotaFalecimentoForm = document.getElementById('editNotaFalecimentoForm');
            if (editNotaFalecimentoForm) {
                editNotaFalecimentoForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(editNotaFalecimentoForm);
                    const dados = Object.fromEntries(formData);
                    const id = parseInt(dados.id);
                    
                    delete dados.id;
                    
                    const notas = JSON.parse(localStorage.getItem('radioAloVoce_notas_falecimento') || '[]');
                    const index = notas.findIndex(n => n.id === id);
                    
                    if (index !== -1) {
                        const notaExistente = notas[index];
                        notas[index] = {
                            ...notaExistente,
                            ...dados,
                            id: id,
                            dataEdicao: new Date().toISOString()
                        };
                        
                        localStorage.setItem('radioAloVoce_notas_falecimento', JSON.stringify(notas));
                        
                        if (adminSystem) {
                            adminSystem.loadNotasFalecimento();
                            adminSystem.updateStats();
                        }
                        
                        closeModal('editNotaFalecimentoModal');
                        showToast('Nota de falecimento atualizada com sucesso!', 'success');
                    } else {
                        showToast('Erro ao atualizar nota de falecimento!', 'error');
                    }
                });
            }

            // Formul√°rio de Evento (criar)
            const eventoForm = document.getElementById('eventoForm');
            if (eventoForm) {
                eventoForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(eventoForm);
                    const dadosEvento = {
                        titulo: formData.get('titulo'),
                        descricao: formData.get('descricao'),
                        data: formData.get('data'),
                        hora: formData.get('hora'),
                        local: formData.get('local'),
                        categoria: formData.get('categoria'),
                        preco: formData.get('preco') || 'Consultar',
                        organizador: formData.get('organizador') || 'N√£o informado',
                        telefone: formData.get('telefone') || '',
                        email: formData.get('email') || ''
                    };
                    
                    // Converter data para formato brasileiro
                    if (dadosEvento.data && dadosEvento.data.includes('-')) {
                        const partes = dadosEvento.data.split('-');
                        if (partes.length === 3) {
                            dadosEvento.data = `${partes[2]}/${partes[1]}/${partes[0]}`;
                        }
                    }
                    
                    if (window.eventosAdmin) {
                        window.eventosAdmin.addEvento(dadosEvento);
                    }
                    
                    eventoForm.reset();
                    closeModal('eventoModal');
                    showToast('Evento adicionado com sucesso!', 'success');
                });
            }
        }

        // Navega√ß√£o entre p√°ginas - Fun√ß√£o movida para admin-sistema.js
        // function showPage(pageId) { ... } - REMOVIDA PARA EVITAR CONFLITO

        // Fun√ß√µes dos modais - Escopo Global
        window.addPropaganda = function() {
            document.getElementById('propagandaModal').style.display = 'block';
        }

        window.addNoticia = function() {
            document.getElementById('noticiaModal').style.display = 'block';
        }

        window.addNotaFalecimento = function() {
            document.getElementById('notaFalecimentoModal').style.display = 'block';
        }

        window.closeModal = function(modalId) {
            console.log('üîí Tentando fechar modal:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                console.log('‚úÖ Modal fechado:', modalId);
                
                // Limpar formul√°rio se for o modal de edi√ß√£o de vaga
                if (modalId === 'editVagaModal') {
                    const form = document.getElementById('editVagaForm');
                    if (form) {
                        form.reset();
                        console.log('üßπ Formul√°rio de edi√ß√£o de vaga limpo');
                    }
                }
            } else {
                console.error('‚ùå Modal n√£o encontrado:', modalId);
            }
        }

        // Fun√ß√µes auxiliares globais - MOVIDAS PARA admin-sistema.js
        // window.showPage = showPage;
        // window.toggleSidebar = toggleSidebar;
        // window.toggleTheme = toggleTheme;
        // window.toggleUserMenu = toggleUserMenu;
        // window.searchTable = searchTable;
        // window.logout = logout;

        // Fun√ß√£o para fechar todos os modais
        window.closeAllModals = function() {
            console.log('üö® Fechando todos os modais...');
            const allModals = document.querySelectorAll('.modal');
            allModals.forEach(modal => {
                modal.style.display = 'none';
                console.log('‚úÖ Modal fechado:', modal.id || 'sem ID');
            });
            return allModals.length;
        }
        
        // Fechar modal ao clicar fora
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                console.log('üîÑ Modal fechado ao clicar fora');
            }
        }
        
        // Adicionar tecla de escape para fechar modais
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeAllModals();
                console.log('‚å®Ô∏è Modais fechados com ESC');
            }
        });
        
        // Fun√ß√£o de teste para verificar se o modal est√° funcionando
        window.testEditVagaModal = function() {
            console.log('üß™ Testando modal de edi√ß√£o de vaga...');
            const modal = document.getElementById('editVagaModal');
            if (modal) {
                console.log('‚úÖ Modal encontrado');
                console.log('üìä Display atual:', modal.style.display);
                console.log('üìä Visibilidade:', window.getComputedStyle(modal).display);
                
                // Testar fechamento
                closeModal('editVagaModal');
                setTimeout(() => {
                    console.log('üìä Display ap√≥s fechamento:', modal.style.display);
                    console.log('üìä Visibilidade ap√≥s fechamento:', window.getComputedStyle(modal).display);
                }, 100);
            } else {
                console.error('‚ùå Modal n√£o encontrado');
            }
        }

        // Fun√ß√µes de a√ß√£o das tabelas - Escopo Global
        window.aprovarPropaganda = function(id) {
            if (adminSystem) {
                if (adminSystem.aprovarPropaganda(id)) {
                    showToast('Propaganda aprovada com sucesso!', 'success');
                }
            }
        }

        window.rejeitarPropaganda = function(id) {
            if (adminSystem) {
                adminSystem.rejeitarPropaganda(id);
                showToast('Propaganda rejeitada!', 'warning');
            }
        }

        // FUN√á√ïES DE EDI√á√ÉO COMPLETAS
        window.editarPropaganda = function(id) {
            const propagandas = JSON.parse(localStorage.getItem('radioAloVoce_propagandas') || '[]');
            const propaganda = propagandas.find(p => p.id === id);
            
            if (propaganda) {
                // Preencher formul√°rio de edi√ß√£o
                document.getElementById('editPropagandaId').value = propaganda.id;
                document.querySelector('#editPropagandaForm [name="empresa"]').value = propaganda.empresa || '';
                document.querySelector('#editPropagandaForm [name="duracao"]').value = propaganda.duracao || '';
                document.querySelector('#editPropagandaForm [name="valor"]').value = propaganda.valor || '';
                document.querySelector('#editPropagandaForm [name="dataInicio"]').value = propaganda.dataInicio || '';
                document.querySelector('#editPropagandaForm [name="dataFim"]').value = propaganda.dataFim || '';
                document.querySelector('#editPropagandaForm [name="status"]').value = propaganda.status || 'pendente';
                document.querySelector('#editPropagandaForm [name="descricao"]').value = propaganda.descricao || '';
                document.querySelector('#editPropagandaForm [name="telefone"]').value = propaganda.telefone || '';
                document.querySelector('#editPropagandaForm [name="website"]').value = propaganda.website || '';
                
                // Abrir modal
                document.getElementById('editPropagandaModal').style.display = 'block';
            } else {
                showToast('Propaganda n√£o encontrada!', 'error');
            }
        }

        window.deletarPropaganda = function(id) {
            if (confirm('Tem certeza que deseja deletar esta propaganda?')) {
                if (adminSystem) {
                    adminSystem.deletarPropaganda(id);
                    showToast('Propaganda deletada com sucesso!', 'error');
                }
            }
        }

        window.aprovarNoticia = function(id) {
            if (adminSystem) {
                adminSystem.aprovarNoticia(id);
                showToast('Not√≠cia aprovada com sucesso!', 'success');
            }
        }

        window.rejeitarNoticia = function(id) {
            if (adminSystem) {
                adminSystem.rejeitarNoticia(id);
                showToast('Not√≠cia rejeitada!', 'warning');
            }
        }

        window.editarNoticia = function(id) {
            const noticias = JSON.parse(localStorage.getItem('radioAloVoce_noticias') || '[]');
            const noticia = noticias.find(n => n.id === id);
            
            if (noticia) {
                // Preencher formul√°rio de edi√ß√£o
                document.getElementById('editNoticiaId').value = noticia.id;
                document.querySelector('#editNoticiaForm [name="titulo"]').value = noticia.titulo || '';
                document.querySelector('#editNoticiaForm [name="empresa"]').value = noticia.empresa || '';
                document.querySelector('#editNoticiaForm [name="conteudo"]').value = noticia.conteudo || '';
                document.querySelector('#editNoticiaForm [name="valor"]').value = noticia.valor || '';
                document.querySelector('#editNoticiaForm [name="status"]').value = noticia.status || 'pendente';
                
                // Converter data para formato datetime-local
                if (noticia.dataPublicacao) {
                    const data = new Date(noticia.dataPublicacao);
                    const ano = data.getFullYear();
                    const mes = String(data.getMonth() + 1).padStart(2, '0');
                    const dia = String(data.getDate()).padStart(2, '0');
                    const hora = String(data.getHours()).padStart(2, '0');
                    const minuto = String(data.getMinutes()).padStart(2, '0');
                    document.querySelector('#editNoticiaForm [name="dataPublicacao"]').value = `${ano}-${mes}-${dia}T${hora}:${minuto}`;
                }
                
                // Abrir modal
                document.getElementById('editNoticiaModal').style.display = 'block';
            } else {
                showToast('Not√≠cia n√£o encontrada!', 'error');
            }
        }

        window.deletarNoticia = function(id) {
            if (confirm('Tem certeza que deseja deletar esta not√≠cia?')) {
                if (adminSystem) {
                    adminSystem.deletarNoticia(id);
                    showToast('Not√≠cia deletada com sucesso!', 'error');
                }
            }
        }

        window.aprovarNotaFalecimento = function(id) {
            if (adminSystem) {
                adminSystem.aprovarNotaFalecimento(id);
                showToast('Nota de falecimento aprovada com sucesso!', 'success');
            }
        }

        window.rejeitarNotaFalecimento = function(id) {
            if (adminSystem) {
                adminSystem.rejeitarNotaFalecimento(id);
                showToast('Nota de falecimento rejeitada!', 'warning');
            }
        }

        window.editarNotaFalecimento = function(id) {
            const notas = JSON.parse(localStorage.getItem('radioAloVoce_notas_falecimento') || '[]');
            const nota = notas.find(n => n.id === id);
            
            if (nota) {
                // Preencher formul√°rio de edi√ß√£o
                document.getElementById('editNotaFalecimentoId').value = nota.id;
                document.querySelector('#editNotaFalecimentoForm [name="nome"]').value = nota.nome || '';
                document.querySelector('#editNotaFalecimentoForm [name="apelido"]').value = nota.apelido || '';
                document.querySelector('#editNotaFalecimentoForm [name="idade"]').value = nota.idade || '';
                document.querySelector('#editNotaFalecimentoForm [name="empresa"]').value = nota.empresa || '';
                document.querySelector('#editNotaFalecimentoForm [name="mensagem"]').value = nota.mensagem || '';
                document.querySelector('#editNotaFalecimentoForm [name="status"]').value = nota.status || 'pendente';
                
                // Abrir modal
                document.getElementById('editNotaFalecimentoModal').style.display = 'block';
            } else {
                showToast('Nota de falecimento n√£o encontrada!', 'error');
            }
        }

        window.deletarNotaFalecimento = function(id) {
            if (confirm('Tem certeza que deseja deletar esta nota?')) {
                if (adminSystem) {
                    adminSystem.deletarNotaFalecimento(id);
                    showToast('Nota de falecimento deletada com sucesso!', 'error');
                }
            }
        }

        // Fun√ß√µes para eventos
        window.addEvento = function() {
            document.getElementById('eventoModal').style.display = 'block';
        }

        window.aprovarEvento = function(id) {
            if (window.eventosAdmin) {
                window.eventosAdmin.aprovarEvento(id);
                showToast('Evento aprovado com sucesso!', 'success');
            }
        }

        window.deletarEvento = function(id) {
            if (window.eventosAdmin) {
                window.eventosAdmin.deletarEvento(id);
            }
        }

        window.toggleDestaque = function(id) {
            if (window.eventosAdmin) {
                window.eventosAdmin.toggleDestaque(id);
                showToast('Status de destaque alterado!', 'info');
            }
        }

        window.editarEvento = function(id) {
            const eventos = JSON.parse(localStorage.getItem('radioAloVoce_eventos') || '[]');
            const evento = eventos.find(e => e.id === id);
            
            if (evento) {
                // Preencher formul√°rio de edi√ß√£o
                document.getElementById('editEventoId').value = evento.id;
                document.querySelector('#editEventoForm [name="titulo"]').value = evento.titulo || '';
                document.querySelector('#editEventoForm [name="descricao"]').value = evento.descricao || '';
                document.querySelector('#editEventoForm [name="local"]').value = evento.local || '';
                document.querySelector('#editEventoForm [name="categoria"]').value = evento.categoria || '';
                document.querySelector('#editEventoForm [name="preco"]').value = evento.preco || '';
                document.querySelector('#editEventoForm [name="organizador"]').value = evento.organizador || '';
                document.querySelector('#editEventoForm [name="telefone"]').value = evento.telefone || '';
                document.querySelector('#editEventoForm [name="email"]').value = evento.email || '';
                document.querySelector('#editEventoForm [name="status"]').value = evento.status || 'ativo';
                document.querySelector('#editEventoForm [name="destaque"]').checked = evento.destaque || false;
                
                // Converter data se necess√°rio
                if (evento.data) {
                    // Se a data estiver no formato brasileiro (DD/MM/YYYY), converter para YYYY-MM-DD
                    let dataFormatada = evento.data;
                    if (evento.data.includes('/')) {
                        const partes = evento.data.split('/');
                        if (partes.length === 3) {
                            dataFormatada = `${partes[2]}-${partes[1].padStart(2, '0')}-${partes[0].padStart(2, '0')}`;
                        }
                    }
                    document.querySelector('#editEventoForm [name="data"]').value = dataFormatada;
                }
                
                document.querySelector('#editEventoForm [name="hora"]').value = evento.hora || '';
                
                // Abrir modal
                document.getElementById('editEventoModal').style.display = 'block';
            } else {
                showToast('Evento n√£o encontrado!', 'error');
            }
        }

        window.sincronizarEventos = function() {
            if (window.eventosAdmin) {
                window.eventosAdmin.forceSyncronizacao();
            } else {
                showToast('Sistema de eventos sincronizado!', 'success');
            }
        }

        // Busca nas tabelas
        function searchTable(tableId, searchTerm) {
            const rows = document.querySelectorAll(`#${tableId} tr`);
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                const match = text.includes(searchTerm.toLowerCase());
                row.style.display = match ? '' : 'none';
            });
        }

        // Logout - Fun√ß√£o movida para admin-sistema.js
        // function logout() { ... } - REMOVIDA PARA EVITAR CONFLITO

        // Toggle menu do usu√°rio - VERS√ÉO CORRIGIDA
        function toggleUserMenu(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            console.log('üéØ Fun√ß√£o toggleUserMenu chamada!');
            
            const dropdown = document.getElementById('userDropdown');
            if (!dropdown) {
                console.error('‚ùå Dropdown n√£o encontrado!');
                return;
            }
            
            const isOpen = dropdown.classList.contains('show');
            console.log('üìä Status atual do dropdown:', isOpen ? 'ABERTO' : 'FECHADO');
            
            // Fechar todos os dropdowns abertos
            document.querySelectorAll('.user-dropdown.show').forEach(d => {
                d.classList.remove('show');
            });
            
            // Toggle do dropdown atual
            if (!isOpen) {
                dropdown.classList.add('show');
                console.log('‚úÖ Dropdown ABERTO com sucesso!');
            } else {
                dropdown.classList.remove('show');
                console.log('‚ùå Dropdown FECHADO');
            }
        }

        // Fechar dropdown ao clicar fora
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            if (dropdown && !userMenu.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Corrigir o onclick do HTML para passar o evento
        document.addEventListener('DOMContentLoaded', function() {
            const userMenu = document.querySelector('.user-menu');
            if (userMenu) {
                userMenu.onclick = function(e) { toggleUserMenu(e); };
            }
        });

        // Fun√ß√µes do dropdown menu (escopo global)
        window.showUserProfile = function() {
            console.log('üéØ Fun√ß√£o showUserProfile() chamada!');
            console.log('üîç Verificando elementos do DOM...');
            
            // Verificar se o dropdown existe
            const dropdown = document.getElementById('userDropdown');
            if (!dropdown) {
                console.error('‚ùå Dropdown n√£o encontrado!');
                return;
            }
            
            // Verificar se showModal existe
            if (typeof showModal !== 'function') {
                console.error('‚ùå Fun√ß√£o showModal n√£o encontrada!');
                alert('Erro: Fun√ß√£o showModal n√£o est√° dispon√≠vel');
                return;
            }
            
            try {
                console.log('üìã Carregando dados do perfil...');
                const profileData = loadProfileData();
                console.log('‚úÖ Dados do perfil carregados:', profileData);
                
                const sessionData = JSON.parse(localStorage.getItem('adminSession') || '{}');
                const lastLogin = sessionData.loginTime ? new Date(sessionData.loginTime).toLocaleString('pt-BR') : 'N/A';
                const memberSince = profileData.dataCriacao ? new Date(profileData.dataCriacao).toLocaleDateString('pt-BR') : 'Janeiro 2024';
                const lastUpdate = profileData.ultimaAtualizacao ? new Date(profileData.ultimaAtualizacao).toLocaleString('pt-BR') : 'N/A';
                
                console.log('üìä Dados de sess√£o processados');
                
                const profileInfo = `
                    <div style="text-align: center; padding: 2rem;">
                        <h3 style="color: #10b981; margin-bottom: 1rem;">üë§ Perfil do Administrador</h3>
                        <div style="background: #f8fafc; padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                            <h4 style="margin: 0 0 0.5rem 0;">${profileData.nome}</h4>
                            <p style="color: #64748b; margin: 0 0 0.5rem 0;">${profileData.email}</p>
                            <p style="color: #64748b; margin: 0;">${profileData.cargo}</p>
                        </div>
                        <div style="text-align: left; background: white; padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                            <p style="margin: 0.5rem 0;"><strong>√öltimo Login:</strong> ${lastLogin}</p>
                            <p style="margin: 0.5rem 0;"><strong>Membro Desde:</strong> ${memberSince}</p>
                            <p style="margin: 0.5rem 0;"><strong>√öltima Atualiza√ß√£o:</strong> ${lastUpdate}</p>
                        </div>
                        <div style="margin-top: 1rem;">
                            <button onclick="this.closest('.modal').remove()" style="background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                                <i class="fas fa-times"></i> Fechar
                            </button>
                        </div>
                    </div>
                `;
                console.log('üìã Conte√∫do do perfil gerado, chamando showModal...');
                console.log('üîç Verificando se showModal existe:', typeof showModal);
                console.log('üîç Verificando se window.showModal existe:', typeof window.showModal);
                
                // Mostrar o perfil completo
                const result = window.showModal ? window.showModal('Meu Perfil', profileInfo) : showModal('Meu Perfil', profileInfo);
                
                if (result) {
                    console.log('‚úÖ Modal do perfil exibido com sucesso!');
                } else {
                    console.error('‚ùå Falha ao exibir modal do perfil');
                }
                
                document.getElementById('userDropdown').classList.remove('show');
                console.log('üîÑ Dropdown fechado');
            } catch (error) {
                console.error('‚ùå Erro ao mostrar perfil:', error);
                alert('Erro ao carregar perfil: ' + error.message);
            }
        };
        
        // Fun√ß√£o de teste para o perfil
        window.testShowUserProfile = function() {
            console.log('üß™ Teste: Fun√ß√£o testShowUserProfile() chamada!');
            alert('üß™ Fun√ß√£o testShowUserProfile() foi chamada com sucesso!');
            window.showUserProfile();
        };
        
        window.showUserSettings = function() {
            console.log('‚öôÔ∏è Fun√ß√£o showUserSettings() chamada!');
            
            // Verificar se showModal existe
            if (typeof showModal !== 'function') {
                console.error('‚ùå Fun√ß√£o showModal n√£o encontrada!');
                alert('Erro: Fun√ß√£o showModal n√£o est√° dispon√≠vel');
                return;
            }
            
            const settingsInfo = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>‚öôÔ∏è Configura√ß√µes</h3>
                    <div style='margin-bottom: 1rem;'>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='notifications' checked>
                            <span style='margin-left: 0.5rem;'>Receber notifica√ß√µes</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='autoSync' checked>
                            <span style='margin-left: 0.5rem;'>Sincroniza√ß√£o autom√°tica</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='darkMode'>
                            <span style='margin-left: 0.5rem;'>Modo escuro</span>
                        </label>
                    </div>
                    <div style='margin-top: 1rem;'>
                        <button class='btn btn-primary' onclick='saveSettings()'>
                            <i class='fas fa-save'></i>
                            Salvar Configura√ß√µes
                        </button>
                    </div>
                </div>
            `;
            showModal('Configura√ß√µes', settingsInfo);
            document.getElementById('userDropdown').classList.remove('show');
        };
        window.showSystemInfo = function() {
            console.log('üìä Fun√ß√£o showSystemInfo() chamada!');
            
            // Verificar se showModal existe
            if (typeof showModal !== 'function') {
                console.error('‚ùå Fun√ß√£o showModal n√£o encontrada!');
                alert('Erro: Fun√ß√£o showModal n√£o est√° dispon√≠vel');
                return;
            }
            
            const systemInfo = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>üìä Informa√ß√µes do Sistema</h3>
                    <div style='background: var(--bg-tertiary); padding: 1rem; border-radius: 8px; margin: 1rem 0;'>
                        <p><strong>Vers√£o:</strong> 1.0.0</p>
                        <p><strong>√öltima Atualiza√ß√£o:</strong> ${new Date().toLocaleDateString('pt-BR')}</p>
                        <p><strong>Propagandas Ativas:</strong> ${document.getElementById('totalPropagandas')?.textContent || '0'}</p>
                        <p><strong>Not√≠cias Pendentes:</strong> ${document.getElementById('noticiasPendentes')?.textContent || '0'}</p>
                        <p><strong>Ouvintes Online:</strong> ${document.getElementById('ouvintesOnline')?.textContent || '0'}</p>
                        <p><strong>Status:</strong> <span style='color: var(--success);'>‚úÖ Online</span></p>
                    </div>
                    <div style='margin-top: 1rem;'>
                        <button class='btn btn-primary' onclick='refreshSystemInfo()'>
                            <i class='fas fa-sync'></i>
                            Atualizar
                        </button>
                        <button class='btn btn-secondary' onclick='showSystemLogs()'>
                            <i class='fas fa-list'></i>
                            Ver Logs
                        </button>
                    </div>
                </div>
            `;
            showModal('Informa√ß√µes do Sistema', systemInfo);
            document.getElementById('userDropdown').classList.remove('show');
        };
        window.showBackupOptions = function() {
            console.log('üíæ Fun√ß√£o showBackupOptions() chamada!');
            
            // Verificar se showModal existe
            if (typeof showModal !== 'function') {
                console.error('‚ùå Fun√ß√£o showModal n√£o encontrada!');
                alert('Erro: Fun√ß√£o showModal n√£o est√° dispon√≠vel');
                return;
            }
            
            const backupInfo = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>üíæ Backup de Dados</h3>
                    <div style='background: var(--bg-tertiary); padding: 1rem; border-radius: 8px; margin: 1rem 0;'>
                        <p><strong>Dados inclu√≠dos no backup:</strong></p>
                        <ul style='margin: 0.5rem 0; padding-left: 1.5rem;'>
                            <li>Propagandas (${JSON.parse(localStorage.getItem('radioAloVoce_propagandas') || '[]').length})</li>
                            <li>Not√≠cias (${JSON.parse(localStorage.getItem('radioAloVoce_noticias') || '[]').length})</li>
                            <li>Eventos (${JSON.parse(localStorage.getItem('radioAloVoce_eventos') || '[]').length})</li>
                            <li>Vendas (${JSON.parse(localStorage.getItem('radioAloVoce_vendas') || '[]').length})</li>
                            <li>Promo√ß√µes (${JSON.parse(localStorage.getItem('radioAloVoce_promocoes') || '[]').length})</li>
                            <li>Recados (${JSON.parse(localStorage.getItem('radioAloVoce_recados') || '[]').length})</li>
                            <li>Vagas (${JSON.parse(localStorage.getItem('radioAloVoce_vagas') || '[]').length})</li>
                        </ul>
                    </div>
                    <p style='color: var(--warning);'><i class='fas fa-exclamation-triangle'></i> O backup ser√° baixado como arquivo JSON</p>
                    <div style='margin-top: 1rem;'>
                        <button class='btn btn-primary' onclick='downloadBackup()'>
                            <i class='fas fa-download'></i>
                            Baixar Backup Completo
                        </button>
                        <button class='btn btn-secondary' onclick='downloadSelectiveBackup()'>
                            <i class='fas fa-filter'></i>
                            Backup Seletivo
                        </button>
                    </div>
                </div>
            `;
            showModal('Backup de Dados', backupInfo);
            document.getElementById('userDropdown').classList.remove('show');
        };
        window.downloadBackup = function() {
            try {
                const backupData = {
                    timestamp: new Date().toISOString(),
                    version: '1.0.0',
                    data: {
                        propagandas: JSON.parse(localStorage.getItem('radioAloVoce_propagandas') || '[]'),
                        noticias: JSON.parse(localStorage.getItem('radioAloVoce_noticias') || '[]'),
                        eventos: JSON.parse(localStorage.getItem('radioAloVoce_eventos') || '[]'),
                        vendas: JSON.parse(localStorage.getItem('radioAloVoce_vendas') || '[]'),
                        promocoes: JSON.parse(localStorage.getItem('radioAloVoce_promocoes') || '[]'),
                        recados: JSON.parse(localStorage.getItem('radioAloVoce_recados') || '[]'),
                        vagas: JSON.parse(localStorage.getItem('radioAloVoce_vagas') || '[]'),
                        notas_falecimento: JSON.parse(localStorage.getItem('radioAloVoce_notas_falecimento') || '[]')
                    }
                };
                const dataStr = JSON.stringify(backupData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `radio-alo-voce-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showToast('Backup baixado com sucesso!', 'success');
                document.querySelector('.modal').remove();
            } catch (error) {
                console.error('Erro ao fazer backup:', error);
                showToast('Erro ao fazer backup!', 'error');
            }
        };
        window.showSyncStatus = function() {
            console.log('üîÑ Fun√ß√£o showSyncStatus() chamada!');
            
            // Verificar se showModal existe
            if (typeof showModal !== 'function') {
                console.error('‚ùå Fun√ß√£o showModal n√£o encontrada!');
                alert('Erro: Fun√ß√£o showModal n√£o est√° dispon√≠vel');
                return;
            }
            
            const syncInfo = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>üîÑ Status de Sincroniza√ß√£o</h3>
                    <div style='background: var(--bg-tertiary); padding: 1rem; border-radius: 8px; margin: 1rem 0;'>
                        <p><strong>R√°dio Principal:</strong> <span style='color: var(--success);'>‚úÖ Conectado</span></p>
                        <p><strong>√öltima Sincroniza√ß√£o:</strong> ${new Date().toLocaleString('pt-BR')}</p>
                        <p><strong>Eventos Sincronizados:</strong> ${JSON.parse(localStorage.getItem('radioAloVoce_eventos') || '[]').length}</p>
                        <p><strong>Propagandas Sincronizadas:</strong> ${JSON.parse(localStorage.getItem('radioAloVoce_propagandas') || '[]').length}</p>
                        <p><strong>Vendas Sincronizadas:</strong> ${JSON.parse(localStorage.getItem('radioAloVoce_vendas') || '[]').length}</p>
                        <p><strong>Promo√ß√µes Sincronizadas:</strong> ${JSON.parse(localStorage.getItem('radioAloVoce_promocoes') || '[]').length}</p>
                    </div>
                    <p style='color: var(--info);'><i class='fas fa-info-circle'></i> A sincroniza√ß√£o acontece automaticamente a cada 30 segundos</p>
                    <div style='margin-top: 1rem;'>
                        <button class='btn btn-primary' onclick='forceSyncAll()'>
                            <i class='fas fa-sync'></i>
                            Sincronizar Agora
                        </button>
                        <button class='btn btn-secondary' onclick='showSyncHistory()'>
                            <i class='fas fa-history'></i>
                            Hist√≥rico
                        </button>
                    </div>
                </div>
            `;
            showModal('Status de Sincroniza√ß√£o', syncInfo);
            document.getElementById('userDropdown').classList.remove('show');
        };
        
        // Fun√ß√£o para mostrar modais de forma padronizada
        window.showModal = function(title, content) {
            console.log('üé≠ showModal chamada com t√≠tulo:', title);
            console.log('üìÑ Conte√∫do recebido:', content ? 'Sim' : 'N√£o');
            
            try {
                // Remover modais existentes primeiro
                const existingModals = document.querySelectorAll('.modal');
                existingModals.forEach(modal => modal.remove());
                
                const modal = document.createElement('div');
                modal.className = 'modal';
                modal.style.display = 'block';
                modal.style.position = 'fixed';
                modal.style.inset = '0';
                modal.style.background = 'rgba(0, 0, 0, 0.5)';
                modal.style.zIndex = '1000';
                modal.style.backdropFilter = 'blur(4px)';
                
                modal.innerHTML = `
                    <div class="modal-content" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 20px; padding: 2rem; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);">
                        <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #e2e8f0;">
                            <h2 class="modal-title" style="font-size: 1.5rem; font-weight: 700; color: #0f172a; margin: 0;">${title}</h2>
                            <button class="modal-close" onclick="this.closest('.modal').remove()" style="background: none; border: none; color: #64748b; font-size: 1.5rem; cursor: pointer; padding: 0.5rem; border-radius: 8px;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body" style="line-height: 1.6;">
                            ${content}
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                console.log('‚úÖ Modal criado e adicionado ao DOM');
                console.log('üîç Modal element:', modal);
                console.log('üîç Modal display style:', modal.style.display);
                console.log('üîç Modal position style:', modal.style.position);
                console.log('üîç Modal z-index style:', modal.style.zIndex);
                
                // Fechar modal ao clicar fora
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                        console.log('üîÑ Modal fechado ao clicar fora');
                    }
                });
                
                // Fechar modal com ESC
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        modal.remove();
                        console.log('üîÑ Modal fechado com ESC');
                    }
                });
                
                console.log('üéâ Modal exibido com sucesso!');
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao criar modal:', error);
                alert('Erro ao exibir modal: ' + error.message);
                return false;
            }
        }

        // Fun√ß√µes auxiliares para as op√ß√µes do menu



        window.saveSettings = function() {
            const notifications = document.getElementById('notifications').checked;
            const autoSync = document.getElementById('autoSync').checked;
            const darkMode = document.getElementById('darkMode').checked;

            // Salvar configura√ß√µes no localStorage
            localStorage.setItem('adminSettings', JSON.stringify({
                notifications,
                autoSync,
                darkMode
            }));

            // Aplicar modo escuro se selecionado
            if (darkMode) {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            }

            showToast('Configura√ß√µes salvas com sucesso!', 'success');
            document.querySelector('.modal').remove();
        }

        window.refreshSystemInfo = function() {
            showToast('Informa√ß√µes do sistema atualizadas!', 'success');
            // Recarregar dados
            if (adminSystem) {
                adminSystem.updateStats();
            }
        }

        function showSystemLogs() {
            const logs = [
                { time: '10:30:15', action: 'Login realizado', user: 'Admin' },
                { time: '10:25:42', action: 'Propaganda aprovada', user: 'Admin' },
                { time: '10:20:18', action: 'Evento adicionado', user: 'Admin' },
                { time: '10:15:33', action: 'Sincroniza√ß√£o autom√°tica', user: 'Sistema' },
                { time: '10:10:27', action: 'Backup realizado', user: 'Sistema' }
            ];

            const logsContent = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>üìã Logs do Sistema</h3>
                    <div style='max-height: 300px; overflow-y: auto;'>
                        ${logs.map(log => `
                            <div style='background: var(--bg-tertiary); padding: 0.75rem; border-radius: 8px; margin-bottom: 0.5rem;'>
                                <div style='display: flex; justify-content: space-between; align-items: center;'>
                                    <span style='font-weight: 600;'>${log.action}</span>
                                    <span style='color: var(--text-secondary); font-size: 0.8rem;'>${log.time}</span>
                                </div>
                                <div style='color: var(--text-secondary); font-size: 0.8rem;'>Usu√°rio: ${log.user}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            showModal('Logs do Sistema', logsContent);
        }

        function downloadSelectiveBackup() {
            const selectiveBackup = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>üìÅ Backup Seletivo</h3>
                    <p>Selecione quais dados deseja incluir no backup:</p>
                    <div style='margin: 1rem 0;'>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupPropagandas' checked>
                            <span style='margin-left: 0.5rem;'>Propagandas</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupNoticias' checked>
                            <span style='margin-left: 0.5rem;'>Not√≠cias</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupEventos' checked>
                            <span style='margin-left: 0.5rem;'>Eventos</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupVendas' checked>
                            <span style='margin-left: 0.5rem;'>Vendas</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupPromocoes' checked>
                            <span style='margin-left: 0.5rem;'>Promo√ß√µes</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupRecados' checked>
                            <span style='margin-left: 0.5rem;'>Recados</span>
                        </label>
                        <label class='form-checkbox' style='display: flex; align-items: center; margin-bottom: 0.5rem;'>
                            <input type='checkbox' id='backupVagas' checked>
                            <span style='margin-left: 0.5rem;'>Vagas</span>
                        </label>
                    </div>
                    <div style='margin-top: 1rem;'>
                        <button class='btn btn-primary' onclick='downloadSelectedBackup()'>
                            <i class='fas fa-download'></i>
                            Baixar Backup Seletivo
                        </button>
                    </div>
                </div>
            `;
            showModal('Backup Seletivo', selectiveBackup);
        }

        function downloadSelectedBackup() {
            const selectedData = {};
            
            if (document.getElementById('backupPropagandas').checked) {
                selectedData.propagandas = JSON.parse(localStorage.getItem('radioAloVoce_propagandas') || '[]');
            }
            if (document.getElementById('backupNoticias').checked) {
                selectedData.noticias = JSON.parse(localStorage.getItem('radioAloVoce_noticias') || '[]');
            }
            if (document.getElementById('backupEventos').checked) {
                selectedData.eventos = JSON.parse(localStorage.getItem('radioAloVoce_eventos') || '[]');
            }
            if (document.getElementById('backupVendas').checked) {
                selectedData.vendas = JSON.parse(localStorage.getItem('radioAloVoce_vendas') || '[]');
            }
            if (document.getElementById('backupPromocoes').checked) {
                selectedData.promocoes = JSON.parse(localStorage.getItem('radioAloVoce_promocoes') || '[]');
            }
            if (document.getElementById('backupRecados').checked) {
                selectedData.recados = JSON.parse(localStorage.getItem('radioAloVoce_recados') || '[]');
            }
            if (document.getElementById('backupVagas').checked) {
                selectedData.vagas = JSON.parse(localStorage.getItem('radioAloVoce_vagas') || '[]');
            }

            const backupData = {
                timestamp: new Date().toISOString(),
                version: '1.0.0',
                type: 'selective',
                data: selectedData
            };

            downloadBackupFile(backupData, 'backup-seletivo');
            document.querySelector('.modal').remove();
        }

        function showSyncHistory() {
            const syncHistory = [
                { time: '10:30:15', status: 'success', items: 15, type: 'Eventos' },
                { time: '10:25:42', status: 'success', items: 8, type: 'Propagandas' },
                { time: '10:20:18', status: 'error', items: 0, type: 'Vendas' },
                { time: '10:15:33', status: 'success', items: 12, type: 'Promo√ß√µes' },
                { time: '10:10:27', status: 'success', items: 5, type: 'Recados' }
            ];

            const historyContent = `
                <div style='text-align: left; line-height: 1.6;'>
                    <h3 style='margin-bottom: 1rem; color: var(--primary);'>üìä Hist√≥rico de Sincroniza√ß√£o</h3>
                    <div style='max-height: 300px; overflow-y: auto;'>
                        ${syncHistory.map(sync => `
                            <div style='background: var(--bg-tertiary); padding: 0.75rem; border-radius: 8px; margin-bottom: 0.5rem;'>
                                <div style='display: flex; justify-content: space-between; align-items: center;'>
                                    <span style='font-weight: 600;'>${sync.type}</span>
                                    <span style='color: ${sync.status === 'success' ? 'var(--success)' : 'var(--danger)'}; font-size: 0.8rem;'>
                                        ${sync.status === 'success' ? '‚úÖ' : '‚ùå'} ${sync.status}
                                    </span>
                                </div>
                                <div style='color: var(--text-secondary); font-size: 0.8rem;'>
                                    ${sync.time} - ${sync.items} itens sincronizados
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            showModal('Hist√≥rico de Sincroniza√ß√£o', historyContent);
        }

        function downloadBackupFile(data, filename) {
            try {
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `radio-alo-voce-${filename}-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showToast('Backup baixado com sucesso!', 'success');
            } catch (error) {
                console.error('Erro ao fazer backup:', error);
                showToast('Erro ao fazer backup!', 'error');
            }
        }

        function forceSyncAll() {
            if (window.eventosAdmin) window.eventosAdmin.forceSyncronizacao();
            if (window.vendasAdmin) window.vendasAdmin.forceSyncronizacao();
            if (window.promocoesAdmin) window.promocoesAdmin.forceSyncronizacao();
            if (window.recadosAdmin) window.recadosAdmin.forceSyncronizacao();
            if (window.vagasAdmin) window.vagasAdmin.forceSyncronizacao();
            showToast('Sincroniza√ß√£o for√ßada iniciada!', 'success');
            document.querySelector('.modal').remove();
        }

        // Atualizar dados em tempo real
        let statsUpdateInterval = setInterval(() => {
            if (adminSystem) {
                adminSystem.updateStats();
            }
        }, 30000); // Mudado para 30 segundos para reduzir carga

        // Modal de Nova Vaga
        window.addVaga = function() {
            document.getElementById('vagaModal').style.display = 'block';
        }

        // Fun√ß√µes espec√≠ficas das vagas
        window.aprovarVaga = function(id) {
            if (window.vagasAdmin) {
                window.vagasAdmin.aprovarVaga(id);
                showToast('Vaga aprovada com sucesso!', 'success');
            }
        }

        window.rejeitarVaga = function(id) {
            if (window.vagasAdmin) {
                window.vagasAdmin.rejeitarVaga(id);
                showToast('Vaga rejeitada!', 'warning');
            }
        }

        window.editarVaga = function(id) {
            console.log('üîß Fun√ß√£o editarVaga chamada com ID:', id);
            
            const vagas = JSON.parse(localStorage.getItem('adminVagasData') || '{"vagas": []}').vagas;
            const vaga = vagas.find(v => v.id === id);
            
            if (vaga) {
                // Preencher formul√°rio de edi√ß√£o
                document.getElementById('editVagaId').value = vaga.id;
                document.querySelector('#editVagaForm [name="cargo"]').value = vaga.cargo || '';
                document.querySelector('#editVagaForm [name="empresa"]').value = vaga.empresa || '';
                document.querySelector('#editVagaForm [name="area"]').value = vaga.area || '';
                document.querySelector('#editVagaForm [name="salario"]').value = vaga.salario || '';
                document.querySelector('#editVagaForm [name="descricao"]').value = vaga.descricao || '';
                document.querySelector('#editVagaForm [name="contato"]').value = vaga.contato || '';
                document.querySelector('#editVagaForm [name="cidade"]').value = vaga.cidade || '';
                document.querySelector('#editVagaForm [name="status"]').value = vaga.status || 'ativo';
                document.querySelector('#editVagaForm [name="urgente"]').checked = vaga.urgente || false;
                document.querySelector('#editVagaForm [name="destaque"]').checked = vaga.destaque || false;
                
                // Abrir modal apenas quando chamado explicitamente
                const modal = document.getElementById('editVagaModal');
                if (modal) {
                    modal.style.display = 'block';
                    console.log('‚úÖ Modal de editar vaga aberto manualmente');
                }
            } else {
                showToast('Vaga n√£o encontrada!', 'error');
            }
        }

        window.deletarVaga = function(id) {
            if (confirm('Tem certeza que deseja deletar esta vaga?')) {
                if (window.vagasAdmin) {
                    window.vagasAdmin.deletarVaga(id);
                    showToast('Vaga deletada com sucesso!', 'error');
                }
            }
        }

        window.toggleVagaDestaque = function(id) {
            if (window.vagasAdmin) {
                window.vagasAdmin.toggleDestaque(id);
                showToast('Status de destaque alterado!', 'info');
            }
        }

        window.marcarVagaUrgente = function(id) {
            if (window.vagasAdmin) {
                window.vagasAdmin.toggleUrgente(id);
                showToast('Status de urg√™ncia alterado!', 'info');
            }
        }

        window.sincronizarVagas = function() {
            if (window.vagasAdmin) {
                window.vagasAdmin.forceSyncronizacao();
            } else {
                showToast('Sistema de vagas sincronizado!', 'success');
            }
        }

        // Busca nas tabelas

        // Sistema de Gerenciamento de Perfil
        const PROFILE_DEFAULTS = {
            nome: 'Administrador',
            email: 'admin@radioalovoce.com',
            telefone: '(11) 99999-9999',
            cargo: 'Administrador Geral',
            dataCriacao: '2024-01-01',
            ultimaAtualizacao: new Date().toISOString()
        };

        // Carregar dados do perfil
        function loadProfileData() {
            const profileData = localStorage.getItem('adminProfile');
            if (profileData) {
                return JSON.parse(profileData);
            }
            // Se n√£o existir, criar com dados padr√£o
            localStorage.setItem('adminProfile', JSON.stringify(PROFILE_DEFAULTS));
            return PROFILE_DEFAULTS;
        }
        
        // Expor fun√ß√£o globalmente
        window.loadProfileData = loadProfileData;

        // Salvar dados do perfil
        function saveProfileData(data) {
            data.ultimaAtualizacao = new Date().toISOString();
            localStorage.setItem('adminProfile', JSON.stringify(data));
        }

        // Fun√ß√µes do perfil melhorado
        function editProfile() {
            const profileData = loadProfileData();
            
            const editContent = `
                <div class="profile-edit-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Nome Completo *</label>
                            <input type="text" class="form-input" id="editNome" value="${profileData.nome}" placeholder="Seu nome completo" required>
                            <div class="form-helper">Nome completo do administrador</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">E-mail *</label>
                            <input type="email" class="form-input" id="editEmail" value="${profileData.email}" placeholder="Seu e-mail" required>
                            <div class="form-helper">E-mail para contato e notifica√ß√µes</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Telefone</label>
                            <input type="tel" class="form-input" id="editTelefone" value="${profileData.telefone}" placeholder="(11) 99999-9999">
                            <div class="form-helper">Telefone para contato de emerg√™ncia</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Cargo</label>
                            <input type="text" class="form-input" id="editCargo" value="${profileData.cargo}" placeholder="Seu cargo">
                            <div class="form-helper">Cargo ou fun√ß√£o no sistema</div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">Cancelar</button>
                        <button class="btn btn-primary" onclick="saveProfileChanges()">
                            <i class="fas fa-save"></i>
                            Salvar Altera√ß√µes
                        </button>
                    </div>
                </div>
            `;
            showModal('Editar Perfil', editContent);
        }

        function changePassword() {
            const passwordContent = `
                <div class="password-change-form">
                    <div class="password-requirements">
                        <h4><i class="fas fa-shield-alt"></i> Requisitos de Seguran√ßa</h4>
                        <ul>
                            <li id="req-length">M√≠nimo 8 caracteres</li>
                            <li id="req-uppercase">Pelo menos 1 letra mai√∫scula</li>
                            <li id="req-lowercase">Pelo menos 1 letra min√∫scula</li>
                            <li id="req-number">Pelo menos 1 n√∫mero</li>
                            <li id="req-special">Pelo menos 1 caractere especial</li>
                        </ul>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Senha Atual *</label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="currentPassword" placeholder="Digite sua senha atual" required>
                                <button type="button" class="password-toggle-btn" onclick="togglePasswordVisibility('currentPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nova Senha *</label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="newPassword" placeholder="Digite a nova senha" required>
                                <button type="button" class="password-toggle-btn" onclick="togglePasswordVisibility('newPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength" id="passwordStrength">
                                <div class="strength-bar">
                                    <div class="strength-fill" id="strengthFill"></div>
                                </div>
                                <span class="strength-text" id="strengthText">For√ßa da senha</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Confirmar Nova Senha *</label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="confirmPassword" placeholder="Confirme a nova senha" required>
                                <button type="button" class="password-toggle-btn" onclick="togglePasswordVisibility('confirmPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">Cancelar</button>
                        <button class="btn btn-primary" onclick="savePasswordChange()" id="savePasswordBtn" disabled>
                            <i class="fas fa-key"></i>
                            Alterar Senha
                        </button>
                    </div>
                </div>
            `;
            showModal('Alterar Senha', passwordContent);
            
            // Adicionar listeners para valida√ß√£o em tempo real
            setTimeout(() => {
                const newPasswordInput = document.getElementById('newPassword');
                const confirmPasswordInput = document.getElementById('confirmPassword');
                
                if (newPasswordInput) {
                    newPasswordInput.addEventListener('input', validatePassword);
                }
                if (confirmPasswordInput) {
                    confirmPasswordInput.addEventListener('input', validatePassword);
                }
            }, 100);
        }

        function showActivityLog() {
            const profileLogs = JSON.parse(localStorage.getItem('profileChangeLogs') || '[]');
            const accessLogs = JSON.parse(localStorage.getItem('accessLogs') || '[]');
            
            // Combinar e ordenar logs
            const allLogs = [...profileLogs, ...accessLogs].sort((a, b) => 
                new Date(b.timestamp) - new Date(a.timestamp)
            );
            
            let activityContent = `
                <div class="activity-log">
                    <div class="activity-filters">
                        <select class="form-select" id="activityFilter" style="margin-bottom: 1rem;" onchange="filterActivities()">
                            <option value="all">Todas as atividades</option>
                            <option value="profile">Altera√ß√µes de perfil</option>
                            <option value="access">Acessos ao sistema</option>
                        </select>
                    </div>
                    <div class="activity-list" id="activityList">
            `;
            
            if (allLogs.length === 0) {
                activityContent += `
                    <div class="no-activities">
                        <i class="fas fa-info-circle"></i>
                        <p>Nenhuma atividade registrada ainda.</p>
                    </div>
                `;
            } else {
                allLogs.slice(0, 20).forEach(log => {
                    const timeAgo = getTimeAgo(new Date(log.timestamp));
                    const isProfile = log.action;
                    const isAccess = log.success !== undefined;
                    
                    let icon, title, description;
                    
                    if (isProfile) {
                        icon = 'fas fa-user-edit';
                        title = log.action;
                        description = `Altera√ß√£o realizada no perfil`;
                    } else if (isAccess) {
                        icon = log.success ? 'fas fa-sign-in-alt' : 'fas fa-times-circle';
                        title = log.success ? 'Login realizado' : 'Tentativa de login falhou';
                        description = `Acesso ao sistema`;
                    }
                    
                    activityContent += `
                        <div class="activity-item" data-type="${isProfile ? 'profile' : 'access'}">
                            <div class="activity-icon ${log.success === false ? 'error' : ''}">
                                <i class="${icon}"></i>
                            </div>
                            <div class="activity-content">
                                <h4>${title}</h4>
                                <p>${description}</p>
                                <span class="activity-time">${timeAgo}</span>
                            </div>
                        </div>
                    `;
                });
            }
            
            activityContent += `
                    </div>
                </div>
            `;
            
            showModal('Hist√≥rico de Atividades', activityContent);
        }

        function filterActivities() {
            const filter = document.getElementById('activityFilter').value;
            const activities = document.querySelectorAll('.activity-item');
            
            activities.forEach(activity => {
                const type = activity.dataset.type;
                if (filter === 'all' || type === filter) {
                    activity.style.display = 'flex';
                } else {
                    activity.style.display = 'none';
                }
            });
        }

        function getTimeAgo(date) {
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return 'Agora mesmo';
            if (minutes < 60) return `H√° ${minutes} minuto${minutes > 1 ? 's' : ''}`;
            if (hours < 24) return `H√° ${hours} hora${hours > 1 ? 's' : ''}`;
            if (days < 7) return `H√° ${days} dia${days > 1 ? 's' : ''}`;
            return date.toLocaleDateString('pt-BR');
        }

        // Fun√ß√µes de valida√ß√£o e salvamento
        function saveProfileChanges() {
            const nome = document.getElementById('editNome').value.trim();
            const email = document.getElementById('editEmail').value.trim();
            const telefone = document.getElementById('editTelefone').value.trim();
            const cargo = document.getElementById('editCargo').value.trim();
            
            // Valida√ß√µes
            if (!nome) {
                showToast('Nome √© obrigat√≥rio!', 'error');
                return;
            }
            
            if (!email || !isValidEmail(email)) {
                showToast('E-mail inv√°lido!', 'error');
                return;
            }
            
            // Salvar dados
            const profileData = {
                nome: nome,
                email: email,
                telefone: telefone,
                cargo: cargo,
                dataCriacao: loadProfileData().dataCriacao,
                ultimaAtualizacao: new Date().toISOString()
            };
            
            saveProfileData(profileData);
            
            // Log da altera√ß√£o
            logProfileChange('Perfil atualizado');
            
            showToast('Perfil atualizado com sucesso!', 'success');
            document.querySelector('.modal').remove();
            
            // Atualizar exibi√ß√£o do perfil se estiver aberto
            setTimeout(() => {
                if (document.querySelector('.profile-container')) {
                    showUserProfile();
                }
            }, 500);
        }

        function savePasswordChange() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Verificar senha atual
            if (currentPassword !== '6JM7!b98Vtr#!') {
                showToast('Senha atual incorreta!', 'error');
                return;
            }
            
            // Verificar se as senhas coincidem
            if (newPassword !== confirmPassword) {
                showToast('As senhas n√£o coincidem!', 'error');
                return;
            }
            
            // Verificar for√ßa da senha
            if (!isPasswordStrong(newPassword)) {
                showToast('A nova senha n√£o atende aos requisitos de seguran√ßa!', 'error');
                return;
            }
            
            // Verificar se a nova senha √© diferente da atual
            if (newPassword === currentPassword) {
                showToast('A nova senha deve ser diferente da atual!', 'error');
                return;
            }
            
            // Simular altera√ß√£o de senha (em produ√ß√£o, isso seria feito no servidor)
            showToast('Senha alterada com sucesso!', 'success');
            
            // Log da altera√ß√£o
            logProfileChange('Senha alterada');
            
            // Limpar campos
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            
            document.querySelector('.modal').remove();
        }

        // Fun√ß√µes auxiliares
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function isPasswordStrong(password) {
            const minLength = password.length >= 8;
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumber = /\d/.test(password);
            const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);
            
            return minLength && hasUppercase && hasLowercase && hasNumber && hasSpecial;
        }

        function validatePassword() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const saveBtn = document.getElementById('savePasswordBtn');
            
            // Verificar requisitos
            const requirements = {
                length: newPassword.length >= 8,
                uppercase: /[A-Z]/.test(newPassword),
                lowercase: /[a-z]/.test(newPassword),
                number: /\d/.test(newPassword),
                special: /[!@#$%^&*(),.?":{}|<>]/.test(newPassword)
            };
            
            // Atualizar indicadores visuais
            Object.keys(requirements).forEach(req => {
                const element = document.getElementById(`req-${req}`);
                if (element) {
                    element.style.color = requirements[req] ? 'var(--success)' : 'var(--text-secondary)';
                    element.innerHTML = requirements[req] ? 
                        `‚úì ${element.textContent.replace('‚úì ', '')}` : 
                        element.textContent.replace('‚úì ', '');
                }
            });
            
            // Calcular for√ßa da senha
            const strength = Object.values(requirements).filter(Boolean).length;
            const strengthFill = document.getElementById('strengthFill');
            const strengthText = document.getElementById('strengthText');
            
            if (strengthFill && strengthText) {
                const percentage = (strength / 5) * 100;
                strengthFill.style.width = `${percentage}%`;
                
                let color = 'var(--danger)';
                let text = 'Muito fraca';
                
                if (percentage >= 80) {
                    color = 'var(--success)';
                    text = 'Muito forte';
                } else if (percentage >= 60) {
                    color = 'var(--primary)';
                    text = 'Forte';
                } else if (percentage >= 40) {
                    color = 'var(--warning)';
                    text = 'M√©dia';
                } else if (percentage >= 20) {
                    color = 'var(--danger)';
                    text = 'Fraca';
                }
                
                strengthFill.style.backgroundColor = color;
                strengthText.textContent = text;
                strengthText.style.color = color;
            }
            
            // Habilitar/desabilitar bot√£o
            const isValid = isPasswordStrong(newPassword) && newPassword === confirmPassword;
            if (saveBtn) {
                saveBtn.disabled = !isValid;
            }
        }

        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        function logProfileChange(action) {
            const logs = JSON.parse(localStorage.getItem('profileChangeLogs') || '[]');
            logs.push({
                timestamp: new Date().toISOString(),
                action: action,
                user: 'admin'
            });
            
            // Manter apenas os √∫ltimos 50 logs
            if (logs.length > 50) {
                logs.splice(0, logs.length - 50);
            }
            
            localStorage.setItem('profileChangeLogs', JSON.stringify(logs));
        }
    </script>
    <style>
        /* Garantir que o dropdown fique como abinha flutuante */
        #userDropdown {
            position: absolute;
            top: 70px;
            right: 2rem;
            min-width: 240px;
            z-index: 9999;
        }
        @media (max-width: 600px) {
            #userDropdown {
                right: 1rem;
            }
        }
        
        /* Garantir que modais din√¢micos apare√ßam corretamente */
        .modal {
            display: block !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background-color: rgba(0, 0, 0, 0.5) !important;
            z-index: 10000 !important;
            backdrop-filter: blur(4px) !important;
        }
        
        .modal-content {
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            background: white !important;
            border-radius: 20px !important;
            padding: 2rem !important;
            max-width: 600px !important;
            width: 90% !important;
            max-height: 90vh !important;
            overflow-y: auto !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1) !important;
        }
        
        /* Garantir que o bot√£o de fechar seja clic√°vel */
        .modal-close {
            cursor: pointer !important;
            pointer-events: auto !important;
            z-index: 10001 !important;
            position: relative !important;
            background: none !important;
            border: none !important;
            color: #64748b !important;
            font-size: 1.5rem !important;
            padding: 0.5rem !important;
            border-radius: 8px !important;
            transition: all 0.3s ease !important;
        }
        
        .modal-close:hover {
            background: rgba(0, 0, 0, 0.1) !important;
            color: #0f172a !important;
        }
        
        .modal-close:active {
            transform: scale(0.95) !important;
        }
        
        /* Prevenir scroll infinito */
        html, body {
            overflow-x: hidden !important;
            overflow-y: auto !important;
            height: 100% !important;
            position: relative !important;
        }
        
        .main-layout {
            overflow: hidden !important;
            height: calc(100vh - 70px) !important;
        }
        
        .main-content {
            overflow-y: auto !important;
            height: 100% !important;
            max-height: calc(100vh - 70px) !important;
        }
        
        /* Garantir que n√£o h√° elementos causando scroll infinito */
        * {
            max-height: none !important;
        }
        
        .dashboard-grid,
        .content-section,
        .page-content {
            max-height: none !important;
            overflow: visible !important;
        }
        
        /* Garantir que o modal de editar vaga n√£o apare√ßa automaticamente */
        #editVagaModal {
            display: none !important;
        }
        
        #editVagaModal[style*="display: block"] {
            display: none !important;
        }
        
        /* Prevenir abertura autom√°tica de modais */
        .modal {
            display: none !important;
        }
        
        .modal[style*="display: block"] {
            display: none !important;
        }
    </style>
    <script>
    // Fun√ß√£o simples para toggle do dropdown
    function toggleDropdown() {
        const dropdown = document.getElementById('userDropdown');
        if (!dropdown) return;
        const isVisible = dropdown.classList.contains('show');
        if (isVisible) {
            dropdown.classList.remove('show');
        } else {
            dropdown.classList.add('show');
        }
    }
    // Fechar dropdown ao clicar fora
    document.addEventListener('DOMContentLoaded', function() {
        const userMenu = document.getElementById('userMenu');
        const userDropdown = document.getElementById('userDropdown');
        if (userMenu && userDropdown) {
            document.addEventListener('click', function(event) {
                if (!userMenu.contains(event.target) && !userDropdown.contains(event.target)) {
                    userDropdown.classList.remove('show');
                }
            });
        }
    });

    // Fun√ß√£o para fechar o dropdown ao clicar em uma op√ß√£o
    function closeDropdown() {
        const dropdown = document.getElementById('userDropdown');
        if (dropdown) dropdown.classList.remove('show');
    }





    </script>
    <script>
    // Script de emerg√™ncia para fechar modais
    (function() {
        console.log('üö® Script de emerg√™ncia executando...');
        const allModals = document.querySelectorAll('.modal');
        if (allModals.length > 0) {
            console.log('üîç Encontrados modais abertos:', allModals.length);
            allModals.forEach(modal => {
                modal.style.display = 'none';
                console.log('‚úÖ Modal fechado:', modal.id || 'sem ID');
            });
        } else {
            console.log('‚úÖ Nenhum modal encontrado');
        }
    })();
    
    // Fun√ß√£o de teste global
    window.testShowUserProfile = function() {
        console.log('üß™ Teste: Fun√ß√£o testShowUserProfile() chamada!');
        
        // Teste simples primeiro
        alert('üß™ Fun√ß√£o testShowUserProfile() foi chamada com sucesso!');
        
        // Agora testar o modal
        try {
            const testContent = `
                <div style="text-align: center; padding: 2rem;">
                    <h3 style="color: var(--primary); margin-bottom: 1rem;">üß™ Teste de Modal</h3>
                    <p>Se voc√™ est√° vendo esta mensagem, os modais est√£o funcionando corretamente!</p>
                    <div style="margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="this.closest('.modal').remove()">
                            <i class="fas fa-check"></i>
                            Funcionando!
                        </button>
                    </div>
                </div>
            `;
            
            const result = showModal('Teste de Modal', testContent);
            console.log('üß™ Resultado do teste:', result);
            
            if (!result) {
                alert('‚ùå Erro: showModal retornou false');
            }
        } catch (error) {
            console.error('‚ùå Erro no teste:', error);
            alert('‚ùå Erro no teste: ' + error.message);
        }
        
        // Fechar dropdown
        const dropdown = document.getElementById('userDropdown');
        if (dropdown) {
            dropdown.classList.remove('show');
        }
    };
        
        // Teste simples do modal primeiro (comentado para evitar interfer√™ncia)
        /*
        const testResult = showModal('Teste Simples', '<div style="padding: 2rem; text-align: center;"><h3>üéâ Modal Funcionando!</h3><p>Se voc√™ est√° vendo esta mensagem, o modal est√° funcionando corretamente.</p><p><strong>Status:</strong> ‚úÖ Sucesso</p></div>');
        
        if (testResult) {
            console.log('‚úÖ Teste do modal bem-sucedido');
            alert('Teste do modal bem-sucedido! Verifique se o modal apareceu na tela.');
        } else {
            console.error('‚ùå Teste do modal falhou');
            alert('Teste do modal falhou! Verifique o console para mais detalhes.');
        }
        */
    
    // Expor fun√ß√µes no escopo global
    window.showUserProfile = showUserProfile;
    window.showUserSettings = showUserSettings;
    window.showSystemInfo = showSystemInfo;
    window.showBackupOptions = showBackupOptions;
    window.showSyncStatus = showSyncStatus;
    window.logout = logout;
    // window.showModal = showModal; // REMOVIDO - j√° est√° definido globalmente
    window.testShowUserProfile = testShowUserProfile;
    
    // Log para debug
    console.log('üîß Fun√ß√µes expostas globalmente:', {
        showUserProfile: typeof showUserProfile,
        showModal: typeof showModal,
        testShowUserProfile: typeof testShowUserProfile
    });

    // Fun√ß√£o de teste global
    window.testModalSystem = function() {
        console.log('üß™ Teste completo do sistema de modais...');
        
        // Teste 1: Verificar se as fun√ß√µes existem
        console.log('1. Verificando fun√ß√µes:', {
            showModal: typeof showModal,
            testShowUserProfile: typeof testShowUserProfile,
            showUserProfile: typeof showUserProfile
        });
        
        // Teste 2: Verificar se o dropdown existe
        const dropdown = document.getElementById('userDropdown');
        console.log('2. Dropdown encontrado:', !!dropdown);
        
        // Teste 3: Testar modal simples
        try {
            const result = showModal('Teste Global', '<div style="padding: 2rem; text-align: center;"><h3>üéâ Teste Global</h3><p>Se voc√™ est√° vendo esta mensagem, o sistema de modais est√° funcionando!</p></div>');
            console.log('3. Resultado do teste de modal:', result);
        } catch (error) {
            console.error('3. Erro no teste de modal:', error);
        }
        
        console.log('üß™ Teste completo finalizado');
    };
    
    // Verificar modais periodicamente (reduzido para evitar sobrecarga)
    let modalCheckInterval = setInterval(function() {
        const openModals = document.querySelectorAll('.modal[style*="display: block"]');
        if (openModals.length > 0) {
            console.log('‚ö†Ô∏è Modais abertos detectados:', openModals.length);
            openModals.forEach(modal => {
                console.log('üìã Modal aberto:', modal.id || 'sem ID');
            });
        }
    }, 30000); // Verificar a cada 30 segundos para reduzir carga
    </script>
    <script>
    // Garante que todos os modais estejam fechados ao carregar a p√°gina
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üö® Inicializando sistema de modais...');
        
        // Fechar todos os modais imediatamente
        const allModals = document.querySelectorAll('.modal');
        allModals.forEach(modal => {
            modal.style.display = 'none';
            console.log('‚úÖ Modal fechado:', modal.id || 'sem ID');
        });
        
        // Limpa campos do formul√°rio de edi√ß√£o de vaga
        if (document.getElementById('editVagaForm')) {
            document.getElementById('editVagaForm').reset();
            console.log('üßπ Formul√°rio de edi√ß√£o de vaga limpo');
        }
        
        // Verificar se o modal de editar vaga est√° aberto e fech√°-lo
        const editVagaModal = document.getElementById('editVagaModal');
        if (editVagaModal) {
            editVagaModal.style.display = 'none';
            console.log('üîí Modal de editar vaga fechado for√ßadamente');
        }
        
        setTimeout(function() {
            
            // Adicionar eventos de clique adicionais para o bot√£o X do modal de edi√ß√£o de vaga
            const editVagaModalCloseBtn = document.querySelector('#editVagaModal .modal-close');
            if (editVagaModalCloseBtn) {
                // Remover eventos existentes para evitar duplica√ß√£o
                editVagaModalCloseBtn.replaceWith(editVagaModalCloseBtn.cloneNode(true));
                const newCloseBtn = document.querySelector('#editVagaModal .modal-close');
                
                // Adicionar m√∫ltiplos eventos de clique
                newCloseBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('üñ±Ô∏è Clique detectado no bot√£o X do modal editVagaModal');
                    closeModal('editVagaModal');
                });
                
                newCloseBtn.addEventListener('mousedown', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('üñ±Ô∏è Mouse down detectado no bot√£o X do modal editVagaModal');
                    closeModal('editVagaModal');
                });
                
                console.log('‚úÖ Eventos de clique adicionados ao bot√£o X do modal editVagaModal');
            }
            
            // Fun√ß√£o para limpar todos os intervalos (√∫til para debug)
            window.clearAllIntervals = function() {
                console.log('üßπ Limpando todos os intervalos...');
                const highestIntervalId = window.setInterval(() => {}, 0);
                for (let i = 1; i < highestIntervalId; i++) {
                    window.clearInterval(i);
                }
                console.log('‚úÖ Todos os intervalos foram limpos');
            };
            
            // Fun√ß√£o para corrigir problemas de scroll
            window.fixScrollIssues = function() {
                console.log('üîß Corrigindo problemas de scroll...');
                
                // For√ßar scroll para o topo
                window.scrollTo(0, 0);
                document.documentElement.scrollTop = 0;
                document.body.scrollTop = 0;
                
                // Corrigir overflow do body
                document.body.style.overflow = 'auto';
                document.documentElement.style.overflow = 'auto';
                
                // Verificar se h√° elementos causando scroll infinito
                const allElements = document.querySelectorAll('*');
                allElements.forEach(el => {
                    const style = window.getComputedStyle(el);
                    if (style.height === '100vh' && style.overflow === 'auto') {
                        console.log('‚ö†Ô∏è Elemento com altura 100vh e overflow auto:', el);
                        el.style.height = 'auto';
                    }
                });
                
                console.log('‚úÖ Problemas de scroll corrigidos');
            };
            
            // Executar corre√ß√£o de scroll automaticamente
            setTimeout(() => {
                fixScrollIssues();
            }, 1000);
            
            // Monitorar e prevenir abertura autom√°tica do modal de editar vaga
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                        const editVagaModal = document.getElementById('editVagaModal');
                        if (editVagaModal && editVagaModal.style.display === 'block') {
                            console.log('üö® Modal de editar vaga aberto automaticamente - fechando...');
                            editVagaModal.style.display = 'none';
                        }
                    }
                });
            });
    
            // Observar mudan√ßas no modal de editar vaga
            const editVagaModal = document.getElementById('editVagaModal');
            if (editVagaModal) {
                observer.observe(editVagaModal, {
                    attributes: true,
                    attributeFilter: ['style']
                });
                console.log('üëÅÔ∏è Observador de modal de editar vaga ativado');
            }
            
            console.log('‚úÖ Sistema inicializado com otimiza√ß√µes de performance');
            
            // Fun√ß√£o de emerg√™ncia para fechar modal de editar vaga
            window.emergencyCloseEditVagaModal = function() {
                console.log('üö® FECHAMENTO DE EMERG√äNCIA DO MODAL DE EDITAR VAGA');
                const modal = document.getElementById('editVagaModal');
                if (modal) {
                    modal.style.display = 'none';
                    modal.removeAttribute('style');
                    console.log('‚úÖ Modal de editar vaga fechado de emerg√™ncia');
                }
                
                // Limpar formul√°rio
                const form = document.getElementById('editVagaForm');
                if (form) {
                    form.reset();
                    console.log('üßπ Formul√°rio limpo de emerg√™ncia');
                }
                
                // For√ßar scroll para o topo
                window.scrollTo(0, 0);
                console.log('üìú Scroll for√ßado para o topo');
            };
            
            // Executar fechamento de emerg√™ncia ap√≥s 2 segundos
            setTimeout(() => {
                emergencyCloseEditVagaModal();
            }, 2000);
        }, 100);
    });
    </script>
</body>
</html> 